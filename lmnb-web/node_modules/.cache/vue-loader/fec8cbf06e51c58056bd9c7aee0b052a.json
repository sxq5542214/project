{"remainingRequest":"G:\\vs_workspace\\git_sxq\\lmnb-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\vs_workspace\\git_sxq\\lmnb-web\\src\\views\\business\\record\\recordManager.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\vs_workspace\\git_sxq\\lmnb-web\\src\\views\\business\\record\\recordManager.vue","mtime":1697634607406},{"path":"G:\\vs_workspace\\git_sxq\\lmnb-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686317881343},{"path":"G:\\vs_workspace\\git_sxq\\lmnb-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1686317882159},{"path":"G:\\vs_workspace\\git_sxq\\lmnb-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686317881343},{"path":"G:\\vs_workspace\\git_sxq\\lmnb-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1686317877157}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCB7IHF1ZXJ5UmVjb3JkTGlzdCB9IGZyb20gJ0AvYXBpL3JlY29yZE1hbmFnZXInDQppbXBvcnQgd2F2ZXMgZnJvbSAnQC9kaXJlY3RpdmUvd2F2ZXMnIC8vIHdhdmVzIGRpcmVjdGl2ZQ0KaW1wb3J0IHsgcGFyc2VUaW1lIH0gZnJvbSAnQC91dGlscycNCmltcG9ydCBQYWdpbmF0aW9uIGZyb20gJ0AvY29tcG9uZW50cy9QYWdpbmF0aW9uJyAvLyBzZWNvbmRhcnkgcGFja2FnZSBiYXNlZCBvbiBlbC1wYWdpbmF0aW9uDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ1JlY29yZFRhYmxlJywNCiAgY29tcG9uZW50czogeyBQYWdpbmF0aW9uIH0sDQogIGRpcmVjdGl2ZXM6IHsgd2F2ZXMgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdGFibGVLZXk6IDAsDQogICAgICBsaXN0OiBudWxsLA0KICAgICAgdG90YWw6IDAsDQogICAgICBsaXN0TG9hZGluZzogdHJ1ZSwNCiAgICAgIGxpc3RRdWVyeTogew0KICAgICAgICBwYWdlOiAxLA0KICAgICAgICByb3dzOiAyMCwNCiAgICAgICAgaW1wb3J0YW5jZTogdW5kZWZpbmVkLA0KICAgICAgICB0aXRsZTogdW5kZWZpbmVkLA0KICAgICAgICB0eXBlOiB1bmRlZmluZWQsDQogICAgICAgIHNvcnQ6ICcraWQnDQogICAgICB9LA0KICAgICAgc2hvd1Jldmlld2VyOiBmYWxzZSwNCiAgICAgIGRvd25sb2FkTG9hZGluZzogZmFsc2UNCiAgICB9DQogIH0sDQoNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmdldExpc3QoKQogIH0sDQogICAgbWV0aG9kczogew0KICAgICAgZ2V0TGlzdCgpIHsNCiAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWUNCiAgICAgICAgcXVlcnlSZWNvcmRMaXN0KHRoaXMubGlzdFF1ZXJ5KS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICB0aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhDQogICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLnRvdGFsDQoNCiAgICAgICAgICAvLyBKdXN0IHRvIHNpbXVsYXRlIHRoZSB0aW1lIG9mIHRoZSByZXF1ZXN0DQogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2UNCiAgICAgICAgICB9LCAwLjUgKiAxMDAwKQ0KICAgICAgICB9KQ0KICAgICAgfSwNCiAgICBoYW5kbGVDbGljaygpIHsNCiAgICAgIHRoaXMuZ2V0TGlzdCgpOyANCiAgICB9LA0KDQogICAgZm9ybWF0SnNvbihmaWx0ZXJWYWwpIHsNCiAgICAgIHJldHVybiB0aGlzLmxpc3QubWFwKHYgPT4NCiAgICAgICAgZmlsdGVyVmFsLm1hcChqID0+IHsNCiAgICAgICAgICBpZiAoaiA9PT0gJ3RpbWVzdGFtcCcpIHsNCiAgICAgICAgICAgIHJldHVybiBwYXJzZVRpbWUodltqXSkNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmV0dXJuIHZbal0NCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICApDQogICAgfSwNCiAgICBnZXRTb3J0Q2xhc3M6IGZ1bmN0aW9uKGtleSkgew0KICAgICAgY29uc3Qgc29ydCA9IHRoaXMubGlzdFF1ZXJ5LnNvcnQNCiAgICAgIHJldHVybiBzb3J0ID09PSBgKyR7a2V5fWAgPyAnYXNjZW5kaW5nJyA6ICdkZXNjZW5kaW5nJw0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["recordManager.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoHA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"recordManager.vue","sourceRoot":"src/views/business/record","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <div class=\"filter-container\">\r\n      <div class=\"demo-input-suffix\">\r\n        <el-input\r\n          v-model=\"listQuery.username\"\r\n          placeholder=\"请输入用户名\"\r\n          style=\"width: 200px;\"\r\n          class=\"filter-item\"\r\n          @keyup.enter.native=\"handleFilter\"\r\n        />\r\n        <el-input\r\n          v-model=\"listQuery.billmonth\"\r\n          placeholder=\"请输入账单年月\"\r\n          style=\"width: 200px;margin-left: 10px;\"\r\n          class=\"filter-item\"\r\n        />\r\n        <el-input\r\n          v-model=\"listQuery.pricename\"\r\n          placeholder=\"请输入水价名称\"\r\n          style=\"width: 200px;margin-left: 10px;\"\r\n          class=\"filter-item\"\r\n        />\r\n        <el-button\r\n          v-waves\r\n          class=\"filter-item\"\r\n          type=\"primary\"\r\n          icon=\"el-icon-search\"\r\n          style=\"margin-left: 10px;\"\r\n          @click=\"handleClick\"\r\n        >查询</el-button>\r\n      </div>\r\n    </div>\r\n\r\n    <el-table :key=\"tableKey\"\r\n              v-loading=\"listLoading\"\r\n              :data=\"list\"\r\n              border\r\n              fit\r\n              highlight-current-row\r\n              style=\"width: 100%;\">\r\n      <el-table-column label=\"序号\"\r\n                       prop=\"id\"\r\n                       align=\"center\"\r\n                       width=\"80\"\r\n                       :class-name=\"getSortClass('id')\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.id }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"用户名\" align=\"center\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.username }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"表号\" align=\"center\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.metercode }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"账单年月\" width=\"100\" align=\"center\" :show-overflow-tooltip=\"true\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.billmonth }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"抄表时间\"  align=\"center\" >\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.curtime }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"本次读数\"  width=\"100\" align=\"center\" :show-overflow-tooltip=\"true\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.curnum }}</span> \r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"本次用量\" width=\"100\" align=\"center\" :show-overflow-tooltip=\"true\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.curquantity }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"上次读数\" width=\"100\" align=\"center\" :show-overflow-tooltip=\"true\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.lastnum }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"价格类型\" align=\"center\" :show-overflow-tooltip=\"true\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.pricename }}</span>\r\n        </template>\r\n      </el-table-column>\r\n\r\n\r\n      <!--      <el-table-column label=\"操作\"\r\n                   align=\"center\"\r\n                   class-name=\"small-padding fixed-width\"\r\n                   fixed=\"right\">\r\n    <template slot-scope=\"{row}\">\r\n      <el-button type=\"primary\" size=\"mini\" @click=\"handleClick(row)\">查看</el-button>\r\n    </template>\r\n  </el-table-column>-->\r\n    </el-table> \r\n\r\n    <pagination \r\n      v-show=\"total>0\"\r\n      :total=\"total\"\r\n      :page.sync=\"listQuery.page\"\r\n      :limit.sync=\"listQuery.rows\"\r\n      @pagination=\"getList\"\r\n    />\r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { queryRecordList } from '@/api/recordManager'\r\nimport waves from '@/directive/waves' // waves directive\r\nimport { parseTime } from '@/utils'\r\nimport Pagination from '@/components/Pagination' // secondary package based on el-pagination\r\n\r\nexport default {\r\n  name: 'RecordTable',\r\n  components: { Pagination },\r\n  directives: { waves },\r\n  data() {\r\n    return {\r\n      tableKey: 0,\r\n      list: null,\r\n      total: 0,\r\n      listLoading: true,\r\n      listQuery: {\r\n        page: 1,\r\n        rows: 20,\r\n        importance: undefined,\r\n        title: undefined,\r\n        type: undefined,\r\n        sort: '+id'\r\n      },\r\n      showReviewer: false,\r\n      downloadLoading: false\r\n    }\r\n  },\r\n\r\n  created() {\r\n    this.getList()\n  },\r\n    methods: {\r\n      getList() {\r\n        this.listLoading = true\r\n        queryRecordList(this.listQuery).then(response => {\r\n          this.list = response.data\r\n          this.total = response.total\r\n\r\n          // Just to simulate the time of the request\r\n          setTimeout(() => {\r\n            this.listLoading = false\r\n          }, 0.5 * 1000)\r\n        })\r\n      },\r\n    handleClick() {\r\n      this.getList(); \r\n    },\r\n\r\n    formatJson(filterVal) {\r\n      return this.list.map(v =>\r\n        filterVal.map(j => {\r\n          if (j === 'timestamp') {\r\n            return parseTime(v[j])\r\n          } else {\r\n            return v[j]\r\n          }\r\n        })\r\n      )\r\n    },\r\n    getSortClass: function(key) {\r\n      const sort = this.listQuery.sort\r\n      return sort === `+${key}` ? 'ascending' : 'descending'\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}