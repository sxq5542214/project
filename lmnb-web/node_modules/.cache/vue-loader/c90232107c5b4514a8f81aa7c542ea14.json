{"remainingRequest":"H:\\workspaces\\vueProject\\lm\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!H:\\workspaces\\vueProject\\lm\\src\\views\\business\\charge\\chargeManager.vue?vue&type=script&lang=js&","dependencies":[{"path":"H:\\workspaces\\vueProject\\lm\\src\\views\\business\\charge\\chargeManager.vue","mtime":1690379390987},{"path":"H:\\workspaces\\vueProject\\lm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686317881343},{"path":"H:\\workspaces\\vueProject\\lm\\node_modules\\babel-loader\\lib\\index.js","mtime":1686317882159},{"path":"H:\\workspaces\\vueProject\\lm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686317881343},{"path":"H:\\workspaces\\vueProject\\lm\\node_modules\\vue-loader\\lib\\index.js","mtime":1686317877157}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCg0KaW1wb3J0IHsgcXVlcnlBZGRyZXNzTGlzdCB9IGZyb20gIkAvYXBpL2FkZHJlc3NNYW5hZ2VyIjsNCmltcG9ydCB7IHF1ZXJ5TWV0ZXJBbmRVc2VyTGlzdCB9IGZyb20gIkAvYXBpL21ldGVyTWFuYWdlciI7DQppbXBvcnQgeyBpbml0QWxsRGljdGlvbmFyeSwgZ2V0RGVzY0J5QmVhbkF0dHJWYWx1ZSB9IGZyb20gIkAvYXBpL2RpY3Rpb25hcnlNYW5hZ2VyIjsNCmltcG9ydCB3YXZlcyBmcm9tICJAL2RpcmVjdGl2ZS93YXZlcyI7IC8vIHdhdmVzIGRpcmVjdGl2ZQ0KaW1wb3J0IHsgcGFyc2VUaW1lIH0gZnJvbSAiQC91dGlscyI7DQppbXBvcnQgUGFnaW5hdGlvbiBmcm9tICJAL2NvbXBvbmVudHMvUGFnaW5hdGlvbiI7IC8vIHNlY29uZGFyeSBwYWNrYWdlIGJhc2VkIG9uIGVsLXBhZ2luYXRpb24NCg0KaW1wb3J0IGJpbGxEaWFsb2cgZnJvbSAiLi9iaWxsRGlhbG9nIjsNCmltcG9ydCBjaGFyZ2VMb2dEaWFsb2cgZnJvbSAiLi9jaGFyZ2VMb2dEaWFsb2ciOw0KaW1wb3J0IGNoYXJnZURpYWxvZyBmcm9tICIuL2NoYXJnZURpYWxvZyI7DQoNCg0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJjaGFyZ2VUYWJsZSIsDQogIGNvbXBvbmVudHM6IHsgUGFnaW5hdGlvbiAsYmlsbERpYWxvZywgY2hhcmdlTG9nRGlhbG9nICxjaGFyZ2VEaWFsb2cgfSwNCiAgZGlyZWN0aXZlczogeyB3YXZlcyB9LA0KICBmaWx0ZXJzOiB7DQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGZpbmREZXNjQnlWYWx1ZSA6IGdldERlc2NCeUJlYW5BdHRyVmFsdWUsDQogICAgICB0YWJsZUtleTogMCwNCiAgICAgIGxpc3Q6IG51bGwsDQogICAgICB0b3RhbDogMCwNCiAgICAgIHJhZGlvTWV0ZXIgOiB1bmRlZmluZWQsDQogICAgICBsaXN0TG9hZGluZzogdHJ1ZSwNCiAgICAgIGxpc3RRdWVyeTogew0KICAgICAgICBwYWdlOiAxLA0KICAgICAgICByb3dzOiAyMCwNCiAgICAgICAgaW1wb3J0YW5jZTogdW5kZWZpbmVkLA0KICAgICAgICB0aXRsZTogdW5kZWZpbmVkLA0KICAgICAgICB0eXBlOiB1bmRlZmluZWQsDQogICAgICAgIHNvcnQ6ICIraWQiDQogICAgICB9LA0KICAgICAgc2VsZWN0Um93Ont9LA0KICAgICAgYXJlYUxpc3Q6IFtdLA0KICAgICAgc2hvd1Jldmlld2VyOiBmYWxzZSwNCiAgICAgIGRvd25sb2FkTG9hZGluZzogZmFsc2UNCiAgICB9Ow0KICB9LA0KDQogIGNyZWF0ZWQoKSB7DQogICAgaW5pdEFsbERpY3Rpb25hcnkoKTsNCiAgICB0aGlzLmdldExpc3QoKTsNCiAgICB0aGlzLnVwZGF0ZUFkZHJlc3NMaXN0KDEsIG51bGwpOw0KDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBnZXRMaXN0KCkgew0KICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7DQogICAgICBxdWVyeU1ldGVyQW5kVXNlckxpc3QodGhpcy5saXN0UXVlcnkpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhOw0KICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UudG90YWw7DQoNCiAgICAgICAgLy8gSnVzdCB0byBzaW11bGF0ZSB0aGUgdGltZSBvZiB0aGUgcmVxdWVzdA0KICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7DQogICAgICAgIH0sIDAuNSAqIDEwMDApOw0KICAgICAgfSk7DQogICAgfSwNCiAgICB1cGRhdGVBZGRyZXNzTGlzdChsZXZlbCwgcGFyZW50SWQpIHsNCiAgICAgIGlmICghbGV2ZWwpIHsNCiAgICAgICAgbGV2ZWwgPSAxOw0KICAgICAgfQ0KICAgICAgcXVlcnlBZGRyZXNzTGlzdCh7IGxldmVsOiBsZXZlbCwgcGFyZW50SWQ6IHBhcmVudElkIH0pLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLmFyZWFMaXN0W2xldmVsIC0gMV0gPSByZXNwb25zZS5kYXRhOw0KICAgICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpOw0KICAgICAgfSk7DQogICAgfSwNCiAgICB1cGRhdGVBbGxBcmVhKHZhbCwgbGV2ZWwpIHsNCiAgICAgIGlmIChsZXZlbCA9PSAxKSB7DQogICAgICAgIHRoaXMuYXJlYUxpc3RbMV0gPSB7fTsNCiAgICAgICAgdGhpcy5hcmVhTGlzdFsyXSA9IHt9Ow0KICAgICAgICB0aGlzLmxpc3RRdWVyeS5hcmVhMiA9ICIiOw0KICAgICAgICB0aGlzLmxpc3RRdWVyeS5hcmVhMyA9ICIiOw0KICAgICAgfSBlbHNlIGlmIChsZXZlbCA9PSAyKSB7DQogICAgICAgIHRoaXMuYXJlYUxpc3RbMl0gPSB7fTsNCiAgICAgICAgdGhpcy5saXN0UXVlcnkuYXJlYTMgPSAiIjsNCiAgICAgIH0NCiAgICAgIHZhciBvYmogPSB0aGlzLmFyZWFMaXN0W2xldmVsIC0gMV0uZmluZChvID0+IG8ubmFtZSA9PT0gdmFsKTsNCg0KICAgICAgdGhpcy51cGRhdGVBZGRyZXNzTGlzdChsZXZlbCArIDEsIG9iai5pZCk7DQogICAgfSwNCiAgICBzZXRBcmVhMyh2YWwpIHsNCiAgICAgIHRoaXMubGlzdFF1ZXJ5LmFyZWEzID0gdmFsOw0KICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKTsNCiAgICB9LA0KICAgIGhhbmRsZUZpbHRlcigpIHsNCiAgICAgIHRoaXMubGlzdFF1ZXJ5LnBhZ2UgPSAxOw0KICAgICAgdGhpcy5nZXRMaXN0KCk7DQogICAgfSwNCiAgICByb3dDbGljaygJcm93LCBjb2x1bW4sIGV2ZW50KXsNCiAgICAgIHRoaXMuc2VsZWN0Um93ID0gcm93Ow0KICAgIH0sDQogICAgc2hvd0JpbGxEaWFsb2coKSB7DQogICAgICBpZih0aGlzLiRyZWZzLmJpbGxEaWFsb2cudXNlcmlkKXsNCiAgICAgICAgdGhpcy4kcmVmcy5iaWxsRGlhbG9nLnVzZXJOYW1lID0gdGhpcy5zZWxlY3RSb3cudXNlck5hbWUgKyfnmoTmnIjotKbljZUnOw0KICAgICAgICB0aGlzLiRyZWZzLmJpbGxEaWFsb2cuZGlhbG9nVGFibGVWaXNpYmxlID0gdHJ1ZTsNCiAgICAgIH1lbHNlew0KICAgICAgICB0aGlzLiRub3RpZnkoew0KICAgICAgICAgIHRpdGxlOiAi6K+35YWI6YCJ5oup55So5oi3IiwNCiAgICAgICAgICBtZXNzYWdlOiAi6K+35YWI6YCJ5oup55So5oi377yM5YaN5p+l6K+i6LSm5Y2VIiwNCiAgICAgICAgICB0eXBlOiAiZXJyb3IiLA0KICAgICAgICAgIGR1cmF0aW9uOiAyMDAwDQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQogICAgc2hvd0NoYXJnZUxvZ0RpYWxvZygpIHsNCiAgICAgIGlmKHRoaXMuJHJlZnMuY2hhcmdlTG9nRGlhbG9nLnVzZXJpZCl7DQogICAgICAgIHRoaXMuJHJlZnMuY2hhcmdlTG9nRGlhbG9nLnVzZXJOYW1lID0gdGhpcy5zZWxlY3RSb3cudXNlck5hbWUgKyfnmoTlhYXlgLzorrDlvZUnOw0KICAgICAgICB0aGlzLiRyZWZzLmNoYXJnZUxvZ0RpYWxvZy5kaWFsb2dUYWJsZVZpc2libGUgPSB0cnVlOw0KICAgICAgfWVsc2V7DQogICAgICAgIHRoaXMuJG5vdGlmeSh7DQogICAgICAgICAgdGl0bGU6ICLor7flhYjpgInmi6nnlKjmiLciLA0KICAgICAgICAgIG1lc3NhZ2U6ICLor7flhYjpgInmi6nnlKjmiLfvvIzlho3mn6Xor6LlhYXlgLzorrDlvZUiLA0KICAgICAgICAgIHR5cGU6ICJlcnJvciIsDQogICAgICAgICAgZHVyYXRpb246IDIwMDANCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfSwNCiAgICBzaG93Q2hhcmdlRGlhbG9nKCkgew0KICAgICAgaWYodGhpcy4kcmVmcy5jaGFyZ2VEaWFsb2cudXNlcmlkKXsNCiAgICAgICAgdGhpcy4kcmVmcy5jaGFyZ2VEaWFsb2cudXNlck5hbWUgPSB0aGlzLnNlbGVjdFJvdy51c2VyTmFtZSA7DQogICAgICAgIHRoaXMuJHJlZnMuY2hhcmdlRGlhbG9nLm1ldGVyQ29kZSA9IHRoaXMuc2VsZWN0Um93LmNvZGUgOw0KICAgICAgICB0aGlzLiRyZWZzLmNoYXJnZURpYWxvZy5iYWxhbmNlID0gdGhpcy5zZWxlY3RSb3cuYmFsYW5jZSA7DQogICAgICAgIA0KICAgICAgICB0aGlzLiRyZWZzLmNoYXJnZURpYWxvZy5kaWFsb2dUYWJsZVZpc2libGUgPSB0cnVlOw0KICAgICAgfWVsc2V7DQogICAgICAgIHRoaXMuJG5vdGlmeSh7DQogICAgICAgICAgdGl0bGU6ICLor7flhYjpgInmi6nnlKjmiLciLA0KICAgICAgICAgIG1lc3NhZ2U6ICLor7flhYjpgInmi6nnlKjmiLfvvIzlho3ngrnlh7vlhYXlgLwiLA0KICAgICAgICAgIHR5cGU6ICJlcnJvciIsDQogICAgICAgICAgZHVyYXRpb246IDIwMDANCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["chargeManager.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8NA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"chargeManager.vue","sourceRoot":"src/views/business/charge","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <div class=\"filter-container\">\r\n      <div class=\"demo-input-suffix\">\r\n        <el-input\r\n          v-model=\"listQuery.name\"\r\n          placeholder=\"请输入户名\"\r\n          style=\"width: 200px;\"\r\n          class=\"filter-item\"\r\n          @keyup.enter.native=\"handleFilter\"\r\n        ></el-input>\r\n        <el-input\r\n          v-model=\"listQuery.phone\"\r\n          placeholder=\"请输入电话\"\r\n          style=\"width: 200px;margin-left: 10px;\"\r\n          class=\"filter-item\"\r\n        ></el-input>\r\n        <el-input\r\n          v-model=\"listQuery.idcard\"\r\n          placeholder=\"请输入证件号码\"\r\n          style=\"width: 200px;margin-left: 10px;\"\r\n          class=\"filter-item\"\r\n        />\r\n        <br />\r\n        <el-select\r\n          v-model=\"listQuery.area1\"\r\n          placeholder=\"请输入镇名\"\r\n          style=\"width: 200px;\"\r\n          class=\"filter-item\"\r\n          filterable\r\n          @change=\"updateAllArea($event,1)\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in areaList[0]\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.name\"\r\n          />\r\n        </el-select>\r\n        <el-select\r\n          v-model=\"listQuery.area2\"\r\n          placeholder=\"请输入村名\"\r\n          style=\"width: 200px;margin-left: 10px;\"\r\n          class=\"filter-item\"\r\n          filterable\r\n          @change=\"updateAllArea($event,2)\"\r\n        >\r\n          <el-option\r\n            v-for=\"item1 in areaList[1]\"\r\n            :key=\"item1.id\"\r\n            :label=\"item1.name\"\r\n            :value=\"item1.name\"\r\n          />\r\n        </el-select>\r\n        <el-select\r\n          v-model=\"listQuery.area3\"\r\n          placeholder=\"请输入组名\"\r\n          style=\"width: 200px;margin-left: 10px;\"\r\n          class=\"filter-item\"\r\n          filterable\r\n          @change=\"setArea3($event)\"\r\n        >\r\n          <el-option\r\n            v-for=\"item2 in areaList[2]\"\r\n            :key=\"item2.id\"\r\n            :label=\"item2.name\"\r\n            :value=\"item2.name\"\r\n          />\r\n        </el-select>\r\n        <div class=\"btn-group\">\r\n          <el-button\r\n            v-waves\r\n            class=\"filter-item\"\r\n            type=\"primary\"\r\n            icon=\"el-icon-search\"\r\n            @click=\"handleFilter\"\r\n            style=\"margin-left: 10px;\"\r\n          >查询</el-button>\r\n          <el-button\r\n            class=\"filter-item\"\r\n            style=\"margin-left: 10px;\"\r\n            type=\"success\"\r\n            icon=\"el-icon-money\"\r\n            @click=\"showChargeDialog\"\r\n          >充值</el-button>\r\n          <el-button\r\n            v-waves\r\n            :loading=\"downloadLoading\"\r\n            style=\"margin-left: 10px;\"\r\n            class=\"filter-item\"\r\n            type=\"primary\"\r\n            icon=\"el-icon-check\"\r\n          >开阀</el-button>\r\n          <el-button\r\n            v-waves\r\n            :loading=\"downloadLoading\"\r\n            style=\"margin-left: 10px;\"\r\n            class=\"filter-item\"\r\n            type=\"primary\"\r\n            icon=\"el-icon-close\"\r\n          >关阀</el-button>\r\n          <el-button\r\n            v-waves\r\n            :loading=\"downloadLoading\"\r\n            style=\"margin-left: 10px;\"\r\n            class=\"filter-item\"\r\n            type=\"warning\"\r\n            icon=\"el-icon-s-order\"\r\n            @click=\"showChargeLogDialog\"\r\n          >充值记录</el-button>\r\n          <el-button\r\n            v-waves\r\n            style=\"margin-left: 10px;\"\r\n            class=\"filter-item\"\r\n            type=\"warning\"\r\n            icon=\"el-icon-s-operation\"\r\n            @click=\"showBillDialog\"\r\n          >账单记录</el-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <el-table\r\n      :key=\"tableKey\"\r\n      v-loading=\"listLoading\"\r\n      :data=\"list\"\r\n      @row-click=\"rowClick\"\r\n      border\r\n      fit\r\n      highlight-current-row\r\n      style=\"width: 100%;\"\r\n    >\r\n      <el-table-column\r\n        label=\"序号\"\r\n        prop=\"id\"\r\n        sortable=\"custom\"\r\n        align=\"center\"\r\n        width=\"80\"\r\n      >\r\n        <template slot-scope=\"{row}\">\r\n          <span> {{ row.id }} </span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"户名\"  align=\"center\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.userName }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"余额\"  align=\"center\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.balance }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"最近缴费时间\"  align=\"center\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.lastbuytime }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"最近缴费金额\"  align=\"center\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.lastbuyamount }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"阀门\"  align=\"center\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ findDescByValue('meterModel','valvestate',row.valvestate) }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"电话\" width=\"110px\" align=\"center\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.phone }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"表号\" width=\"150px\" align=\"center\" :show-overflow-tooltip=\"true\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.code }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"地址\" min-width=\"150px\" :show-overflow-tooltip=\"true\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.area1 }} - {{row.area2 }} - {{ row.area3 }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"身份证号\" width=\"110px\" align=\"center\" :show-overflow-tooltip=\"true\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.idcard }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"操作\"\r\n        align=\"center\"\r\n        class-name=\"small-padding fixed-width\"\r\n        fixed=\"right\"\r\n      >\r\n        <template slot-scope=\"{row}\">\r\n          <el-button type=\"primary\" size=\"mini\" @click=\"handleUpdate(row)\">编辑</el-button>\r\n          <!--           <el-button   type=\"danger\" size=\"mini\"  @click=\"handleDelete(row,$index)\">\r\n                      删除\r\n          </el-button>-->\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <pagination\r\n      v-show=\"total>0\"\r\n      :total=\"total\"\r\n      :page.sync=\"listQuery.page\"\r\n      :limit.sync=\"listQuery.rows\"\r\n      @pagination=\"getList\"\r\n    />\r\n    <billDialog ref=\"billDialog\" :userid=\"selectRow.userid\" :userName=\"selectRow.userName\" >\r\n    </billDialog>\r\n    <chargeLogDialog ref=\"chargeLogDialog\" :userid=\"selectRow.userid\" :userName=\"selectRow.userName\" >\r\n    </chargeLogDialog>\r\n    <chargeDialog ref=\"chargeDialog\" :userid=\"selectRow.userid\" :userName=\"selectRow.userName\" :meterCode=\"selectRow.code\" :balance=\"selectRow.balance\" >\r\n    </chargeDialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nimport { queryAddressList } from \"@/api/addressManager\";\r\nimport { queryMeterAndUserList } from \"@/api/meterManager\";\r\nimport { initAllDictionary, getDescByBeanAttrValue } from \"@/api/dictionaryManager\";\r\nimport waves from \"@/directive/waves\"; // waves directive\r\nimport { parseTime } from \"@/utils\";\r\nimport Pagination from \"@/components/Pagination\"; // secondary package based on el-pagination\r\n\r\nimport billDialog from \"./billDialog\";\r\nimport chargeLogDialog from \"./chargeLogDialog\";\r\nimport chargeDialog from \"./chargeDialog\";\r\n\r\n\r\n\r\nexport default {\r\n  name: \"chargeTable\",\r\n  components: { Pagination ,billDialog, chargeLogDialog ,chargeDialog },\r\n  directives: { waves },\r\n  filters: {\r\n  },\r\n  data() {\r\n    return {\r\n      findDescByValue : getDescByBeanAttrValue,\r\n      tableKey: 0,\r\n      list: null,\r\n      total: 0,\r\n      radioMeter : undefined,\r\n      listLoading: true,\r\n      listQuery: {\r\n        page: 1,\r\n        rows: 20,\r\n        importance: undefined,\r\n        title: undefined,\r\n        type: undefined,\r\n        sort: \"+id\"\r\n      },\r\n      selectRow:{},\r\n      areaList: [],\r\n      showReviewer: false,\r\n      downloadLoading: false\r\n    };\r\n  },\r\n\r\n  created() {\r\n    initAllDictionary();\r\n    this.getList();\r\n    this.updateAddressList(1, null);\r\n\r\n  },\r\n  methods: {\r\n    getList() {\r\n      this.listLoading = true;\r\n      queryMeterAndUserList(this.listQuery).then(response => {\r\n        this.list = response.data;\r\n        this.total = response.total;\r\n\r\n        // Just to simulate the time of the request\r\n        setTimeout(() => {\r\n          this.listLoading = false;\r\n        }, 0.5 * 1000);\r\n      });\r\n    },\r\n    updateAddressList(level, parentId) {\r\n      if (!level) {\r\n        level = 1;\r\n      }\r\n      queryAddressList({ level: level, parentId: parentId }).then(response => {\r\n        this.areaList[level - 1] = response.data;\r\n        this.$forceUpdate();\r\n      });\r\n    },\r\n    updateAllArea(val, level) {\r\n      if (level == 1) {\r\n        this.areaList[1] = {};\r\n        this.areaList[2] = {};\r\n        this.listQuery.area2 = \"\";\r\n        this.listQuery.area3 = \"\";\r\n      } else if (level == 2) {\r\n        this.areaList[2] = {};\r\n        this.listQuery.area3 = \"\";\r\n      }\r\n      var obj = this.areaList[level - 1].find(o => o.name === val);\r\n\r\n      this.updateAddressList(level + 1, obj.id);\r\n    },\r\n    setArea3(val) {\r\n      this.listQuery.area3 = val;\r\n      this.$forceUpdate();\r\n    },\r\n    handleFilter() {\r\n      this.listQuery.page = 1;\r\n      this.getList();\r\n    },\r\n    rowClick(\trow, column, event){\r\n      this.selectRow = row;\r\n    },\r\n    showBillDialog() {\r\n      if(this.$refs.billDialog.userid){\r\n        this.$refs.billDialog.userName = this.selectRow.userName +'的月账单';\r\n        this.$refs.billDialog.dialogTableVisible = true;\r\n      }else{\r\n        this.$notify({\r\n          title: \"请先选择用户\",\r\n          message: \"请先选择用户，再查询账单\",\r\n          type: \"error\",\r\n          duration: 2000\r\n        });\r\n      }\r\n    },\r\n    showChargeLogDialog() {\r\n      if(this.$refs.chargeLogDialog.userid){\r\n        this.$refs.chargeLogDialog.userName = this.selectRow.userName +'的充值记录';\r\n        this.$refs.chargeLogDialog.dialogTableVisible = true;\r\n      }else{\r\n        this.$notify({\r\n          title: \"请先选择用户\",\r\n          message: \"请先选择用户，再查询充值记录\",\r\n          type: \"error\",\r\n          duration: 2000\r\n        });\r\n      }\r\n    },\r\n    showChargeDialog() {\r\n      if(this.$refs.chargeDialog.userid){\r\n        this.$refs.chargeDialog.userName = this.selectRow.userName ;\r\n        this.$refs.chargeDialog.meterCode = this.selectRow.code ;\r\n        this.$refs.chargeDialog.balance = this.selectRow.balance ;\r\n        \r\n        this.$refs.chargeDialog.dialogTableVisible = true;\r\n      }else{\r\n        this.$notify({\r\n          title: \"请先选择用户\",\r\n          message: \"请先选择用户，再点击充值\",\r\n          type: \"error\",\r\n          duration: 2000\r\n        });\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n"]}]}