{"remainingRequest":"G:\\git\\project\\.git\\lm\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\git\\project\\.git\\lm\\src\\views\\business\\address\\addressManager.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\git\\project\\.git\\lm\\src\\views\\business\\address\\addressManager.vue","mtime":1689086100324},{"path":"G:\\git\\project\\.git\\lm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686317881343},{"path":"G:\\git\\project\\.git\\lm\\node_modules\\babel-loader\\lib\\index.js","mtime":1686317882159},{"path":"G:\\git\\project\\.git\\lm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686317881343},{"path":"G:\\git\\project\\.git\\lm\\node_modules\\vue-loader\\lib\\index.js","mtime":1686317877157}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBxdWVyeUFkZHJlc3NMaXN0LGFkZEFkZHJlc3MsdXBkYXRlQWRkcmVzcyxkZWxldGVBZGRyZXNzIH0gZnJvbSAiQC9hcGkvYWRkcmVzc01hbmFnZXIiOw0KICBleHBvcnQgZGVmYXVsdCB7DQogICAgZGF0YSgpIHsNCiAgICAgIHJldHVybiB7DQoJCSAgaGVhZGVyTGFiZWw6J+a3u+WKoOWcsOWdgCcsDQoJCSAgYnV0dG9uVHlwZToncHJpbWFyeScsDQoJCSAgYWRkcmVzc0xpc3Q6e30sDQoJCSAgYWRkcmVzczp7cGFyZW50TmFtZTonJyxwYXJlbnRJZDp1bmRlZmluZWQsbmFtZTonJyxsZXZlbDp1bmRlZmluZWQgLGlkOnVuZGVmaW5lZH0sDQogICAgICAgIHByb3BzOiB7DQogICAgICAgICAgbGFiZWw6ICduYW1lJywNCiAgICAgICAgICBjaGlsZHJlbjogJ3pvbmVzJw0KICAgICAgICB9LA0KICAgICAgICBydWxlczogew0KCQkJbmFtZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7floavlhpnlnLDlnYDlkI3np7AnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9XQ0KCQl9LA0KICAgICAgfTsNCgl9LA0KCWNyZWF0ZWQoKXsNCgkJLy8gdGhpcy5pbml0QWRkcmVzc0xpc3QoKTsNCgl9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgIGhhbmRsZUNoZWNrQ2hhbmdlKGRhdGEsIGNoZWNrZWQsIGluZGV0ZXJtaW5hdGUpIHsNCiAgICAgICAgY29uc29sZS5sb2coZGF0YSwgY2hlY2tlZCwgaW5kZXRlcm1pbmF0ZSk7DQogICAgICB9LA0KICAgICAgaGFuZGxlTm9kZUNsaWNrKGRhdGEsbm9kZSkgew0KCQkgIHRoaXMuaGVhZGVyTGFiZWwgPSAn5L+u5pS55Zyw5Z2AJzsNCgkJICB0aGlzLmJ1dHRvblR5cGUgPSAnc3VjY2Vzcyc7DQoJCXRoaXMuYWRkcmVzcy5uYW1lID0gZGF0YS5uYW1lOw0KCQl0aGlzLmFkZHJlc3MubGV2ZWwgPSBkYXRhLmxldmVsOw0KCQl0aGlzLmFkZHJlc3MuaWQgPSBkYXRhLmlkOw0KCQl0aGlzLmFkZHJlc3MucGFyZW50SWQgPSBkYXRhLnBhcmVudElkOw0KCQl2YXIgcGFyZW50RGF0YSA9IG5vZGUucGFyZW50LmRhdGE7DQoJCWlmKHBhcmVudERhdGEpew0KCQkJdGhpcy5hZGRyZXNzLnBhcmVudE5hbWUgPSBwYXJlbnREYXRhLm5hbWU7DQoJCX0NCgkgIH0sDQoJICBoYW5kbGVBZGROZXh0KGRhdGEsbm9kZSl7DQoJCSAgdGhpcy5oZWFkZXJMYWJlbCA9ICfmt7vliqDlnLDlnYAnOw0KCQkgIHRoaXMuYnV0dG9uVHlwZSA9ICdwcmltYXJ5JzsNCgkJdGhpcy5hZGRyZXNzLm5hbWUgPSAnJzsNCgkJdGhpcy5hZGRyZXNzLmxldmVsID0gZGF0YS5sZXZlbCArIDE7DQoJCXRoaXMuYWRkcmVzcy5pZCA9IHVuZGVmaW5lZDsNCgkJdGhpcy5hZGRyZXNzLnBhcmVudElkID0gZGF0YS5pZDsNCgkJdGhpcy5hZGRyZXNzLnBhcmVudE5hbWUgPSBkYXRhLm5hbWU7DQoJICB9LA0KCSAgc3VibWl0QWRkcmVzcygpew0KCQl0aGlzLiRyZWZzWydkYXRhRm9ybSddLnZhbGlkYXRlKCh2YWxpZCkgPT4gew0KCQkJaWYgKHZhbGlkKSB7DQoJCQkJdmFyIGN1ck5vZGUgPSB0aGlzLiRyZWZzLnRyZWUuZ2V0Q3VycmVudE5vZGUoKTsNCgkJCQlpZih0aGlzLmFkZHJlc3MuaWQpew0KCQkJCQl1cGRhdGVBZGRyZXNzKHRoaXMuYWRkcmVzcykudGhlbihyZXNwb25zZSA9PnsNCgkJCQkJCWN1ck5vZGUuZGF0YSA9IHRoaXMuYWRkcmVzczsNCgkJCQkJCWN1ck5vZGUubmFtZSA9IHRoaXMuYWRkcmVzcy5uYW1lOw0KCQkJCQkJdGhpcy4kbm90aWZ5KHsNCgkJCQkJCXRpdGxlOiAn5oiQ5YqfJywNCgkJCQkJCW1lc3NhZ2U6ICfmm7TmlrDmiJDlip8nLA0KCQkJCQkJdHlwZTogJ3N1Y2Nlc3MnLA0KCQkJCQkJZHVyYXRpb246IDIwMDANCgkJCQkJCX0pDQoJCQkJCX0pDQoJCQkJfWVsc2V7DQoJCQkJCWFkZEFkZHJlc3ModGhpcy5hZGRyZXNzKS50aGVuKHJlc3BvbnNlID0+ew0KCQkJCQkJdGhpcy5hZGRyZXNzLmlkID0gcmVzcG9uc2UuZGF0YS5pZDsNCg0KCQkJCQkJdGhpcy4kbm90aWZ5KHsNCgkJCQkJCQl0aXRsZTogJ+aIkOWKnycsDQoJCQkJCQkJbWVzc2FnZTogJ+a3u+WKoOaIkOWKnycsDQoJCQkJCQkJdHlwZTogJ3N1Y2Nlc3MnLA0KCQkJCQkJCWR1cmF0aW9uOiAyMDAwDQoJCQkJCQl9KTsNCgkJCQkJCWlmKHRoaXMuYWRkcmVzcy5sZXZlbCl7DQoJCQkJCQkJdGhpcy4kcmVmcy50cmVlLmFwcGVuZChPYmplY3QuYXNzaWduKHt9LCB0aGlzLmFkZHJlc3MpICxjdXJOb2RlKQ0KCQkJCQkJfWVsc2V7DQoJCQkJCQkJbG9jYXRpb24ucmVsb2FkKCk7DQoJCQkJCQl9DQoJCQkJCX0pDQoJCQkJfQ0KCQkJfQ0KCQl9KQ0KCSAgfSwNCgkgIGRlbGV0ZUFkZHJlc3MoKXsNCgkJICBpZih0aGlzLmFkZHJlc3MuaWQpew0KCQkJZGVsZXRlQWRkcmVzcyh7aWQ6dGhpcy5hZGRyZXNzLmlkfSkudGhlbihyZXNwb25zZSA9PnsNCgkJCQl2YXIgY3VyTm9kZSA9IHRoaXMuJHJlZnMudHJlZS5nZXRDdXJyZW50Tm9kZSgpOw0KCQkJCXRoaXMuJHJlZnMudHJlZS5yZW1vdmUoY3VyTm9kZSkNCgkJCQl0aGlzLiRub3RpZnkoew0KCQkJCQl0aXRsZTogJ+aIkOWKnycsDQoJCQkJCW1lc3NhZ2U6ICfliKDpmaTmiJDlip8nLA0KCQkJCQl0eXBlOiAnc3VjY2VzcycsDQoJCQkJCWR1cmF0aW9uOiAyMDAwDQoJCQkJfSkNCgkJCX0pDQoJCSAgfWVsc2V7DQoJCQkgIHRoaXMuJG5vdGlmeSh7DQoJCQkJCQkJdGl0bGU6ICflpLHotKUnLA0KCQkJCQkJCW1lc3NhZ2U6ICfor7fpgInmi6nlnLDlnYDlkI7lho3ngrnlh7vliKDpmaTvvIEnLA0KCQkJCQkJCXR5cGU6ICdlcnJvcicsDQoJCQkJCQkJZHVyYXRpb246IDIwMDANCgkJCQkJCX0pOw0KCQkgIH0NCgkgIH0sDQoJICByZW5kZXJOZXh0QnV0dG9uKGgsIHsgbm9kZSwgZGF0YSwgc3RvcmUgfSkgew0KICAgICAgICByZXR1cm4gKA0KICAgICAgICAgIDxzcGFuIGNsYXNzPSJjdXN0b20tdHJlZS1ub2RlIj4NCiAgICAgICAgICAgIDxzcGFuIG9uLWNsaWNrPXsgKCkgPT4gdGhpcy5oYW5kbGVOb2RlQ2xpY2soZGF0YSxub2RlKSB9Pntub2RlLmxhYmVsfTwvc3Bhbj4NCiAgICAgICAgICAgIDxzcGFuPg0KICAgICAgICAgICAgICA8ZWwtYnV0dG9uIHNpemU9Im1pbmkiIHR5cGU9InRleHQiIHN0eWxlPSJtYXJnaW4tbGVmdDoxMHB4OyIgb24tY2xpY2s9eyAoKSA9PiB0aGlzLmhhbmRsZUFkZE5leHQoZGF0YSxub2RlKSB9Pua3u+WKoOS4i+e6pzwvZWwtYnV0dG9uPg0KICAgICAgICAgICAgPC9zcGFuPg0KICAgICAgICAgIDwvc3Bhbj4pOw0KICAgICAgfSwNCiAgICAgIGxvYWROb2RlKG5vZGUsIHJlc29sdmUpIHsNCgkJLy8gICAgY29uc29sZS5sb2cobm9kZSk7DQoJCS8vICAgY29uc29sZS5sb2cocmVzb2x2ZSk7DQoJCXF1ZXJ5QWRkcmVzc0xpc3QoeyBsZXZlbDogbm9kZS5sZXZlbCsxLCBwYXJlbnRJZDogbm9kZS5rZXkgfSkudGhlbihyZXNwb25zZSA9PiB7DQoJCQkJcmVzb2x2ZShyZXNwb25zZS5kYXRhKTsNCgkJCX0pOw0KCQkNCiAgICAgIH0NCiAgICB9DQogIH07DQo="},{"version":3,"sources":["addressManager.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"addressManager.vue","sourceRoot":"src/views/business/address","sourcesContent":["<template>\r\n\t<el-container style=\"border: 1px solid #eee;margin-left:10px;margin-right:10px;\">\r\n\t\t <el-card class=\"box-card\" >\r\n\t\t\t <div slot=\"header\" class=\"clearfix\" >\r\n\t\t\t\t<span>地址列表</span>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"tab-container\">\r\n\t\t\t\t<el-tree\r\n\t\t\t\tnode-key=\"id\"\r\n\t\t\t\tref=\"tree\"\r\n\t\t\t\t:props=\"props\"\r\n\t\t\t\t:load=\"loadNode\"\r\n\t\t\t\tlazy\r\n\t\t\t\r\n\t\t\t\thighlight-current\r\n\t\t\t\t\r\n\t\t\t\t@check-change=\"handleCheckChange\"\r\n\t\t\t\t:render-content=\"renderNextButton\">\r\n\t\t\t\t</el-tree>\r\n\t\t\t</div>\r\n\t\t </el-card>\r\n\t\t <el-container style=\"margin-left:10px;margin-right:10px;\" >\r\n\t\t\t <el-card class=\"box-card\" style=\"width:90%\">\r\n\t\t\t\t<div slot=\"header\" class=\"clearfix\" >\r\n\t\t\t\t\t<span>{{headerLabel}}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"tab-container\">\r\n\t\t\t\t\t<el-form ref=\"dataForm\" :rules=\"rules\" :model=\"address\" label-position=\"left\"  style=\"\">\r\n\t\t\t\t\t\t<el-form-item label=\"上级地址\" prop=\"parentName\" >\r\n\t\t\t\t\t\t\t<el-input v-model=\"address.parentName\" placeholder=\"\"  disabled/>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t<el-form-item label=\"地址名称\" prop=\"name\" >\r\n\t\t\t\t\t\t\t<el-input v-model=\"address.name\" placeholder=\"请输入地址名称\" />\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t<el-form-item label=\"地址级别\" prop=\"level\" >\r\n\t\t\t\t\t\t\t<el-input v-model=\"address.level\" placeholder=\"最上级\"  disabled />\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<el-button :type=\"buttonType\" ref=\"submitBTN\" @click=\"submitAddress\">{{headerLabel}}</el-button>\r\n\t\t\t\t\t\t<el-button type=\"danger\" ref=\"deleteBTN\" @click=\"deleteAddress\">删除地址</el-button>\r\n\t\t\t\t\t</el-form>\r\n\t\t\t\t</div>\r\n\t\t\t </el-card>\r\n\t\t </el-container>\r\n\t</el-container>\r\n</template>\r\n\r\n<script>\r\nimport { queryAddressList,addAddress,updateAddress,deleteAddress } from \"@/api/addressManager\";\r\n  export default {\r\n    data() {\r\n      return {\r\n\t\t  headerLabel:'添加地址',\r\n\t\t  buttonType:'primary',\r\n\t\t  addressList:{},\r\n\t\t  address:{parentName:'',parentId:undefined,name:'',level:undefined ,id:undefined},\r\n        props: {\r\n          label: 'name',\r\n          children: 'zones'\r\n        },\r\n        rules: {\r\n\t\t\tname: [{ required: true, message: '请填写地址名称', trigger: 'change' }]\r\n\t\t},\r\n      };\r\n\t},\r\n\tcreated(){\r\n\t\t// this.initAddressList();\r\n\t},\r\n    methods: {\r\n      handleCheckChange(data, checked, indeterminate) {\r\n        console.log(data, checked, indeterminate);\r\n      },\r\n      handleNodeClick(data,node) {\r\n\t\t  this.headerLabel = '修改地址';\r\n\t\t  this.buttonType = 'success';\r\n\t\tthis.address.name = data.name;\r\n\t\tthis.address.level = data.level;\r\n\t\tthis.address.id = data.id;\r\n\t\tthis.address.parentId = data.parentId;\r\n\t\tvar parentData = node.parent.data;\r\n\t\tif(parentData){\r\n\t\t\tthis.address.parentName = parentData.name;\r\n\t\t}\r\n\t  },\r\n\t  handleAddNext(data,node){\r\n\t\t  this.headerLabel = '添加地址';\r\n\t\t  this.buttonType = 'primary';\r\n\t\tthis.address.name = '';\r\n\t\tthis.address.level = data.level + 1;\r\n\t\tthis.address.id = undefined;\r\n\t\tthis.address.parentId = data.id;\r\n\t\tthis.address.parentName = data.name;\r\n\t  },\r\n\t  submitAddress(){\r\n\t\tthis.$refs['dataForm'].validate((valid) => {\r\n\t\t\tif (valid) {\r\n\t\t\t\tvar curNode = this.$refs.tree.getCurrentNode();\r\n\t\t\t\tif(this.address.id){\r\n\t\t\t\t\tupdateAddress(this.address).then(response =>{\r\n\t\t\t\t\t\tcurNode.data = this.address;\r\n\t\t\t\t\t\tcurNode.name = this.address.name;\r\n\t\t\t\t\t\tthis.$notify({\r\n\t\t\t\t\t\ttitle: '成功',\r\n\t\t\t\t\t\tmessage: '更新成功',\r\n\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\taddAddress(this.address).then(response =>{\r\n\t\t\t\t\t\tthis.address.id = response.data.id;\r\n\r\n\t\t\t\t\t\tthis.$notify({\r\n\t\t\t\t\t\t\ttitle: '成功',\r\n\t\t\t\t\t\t\tmessage: '添加成功',\r\n\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif(this.address.level){\r\n\t\t\t\t\t\t\tthis.$refs.tree.append(Object.assign({}, this.address) ,curNode)\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tlocation.reload();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t  },\r\n\t  deleteAddress(){\r\n\t\t  if(this.address.id){\r\n\t\t\tdeleteAddress({id:this.address.id}).then(response =>{\r\n\t\t\t\tvar curNode = this.$refs.tree.getCurrentNode();\r\n\t\t\t\tthis.$refs.tree.remove(curNode)\r\n\t\t\t\tthis.$notify({\r\n\t\t\t\t\ttitle: '成功',\r\n\t\t\t\t\tmessage: '删除成功',\r\n\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\tduration: 2000\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t  }else{\r\n\t\t\t  this.$notify({\r\n\t\t\t\t\t\t\ttitle: '失败',\r\n\t\t\t\t\t\t\tmessage: '请选择地址后再点击删除！',\r\n\t\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t});\r\n\t\t  }\r\n\t  },\r\n\t  renderNextButton(h, { node, data, store }) {\r\n        return (\r\n          <span class=\"custom-tree-node\">\r\n            <span on-click={ () => this.handleNodeClick(data,node) }>{node.label}</span>\r\n            <span>\r\n              <el-button size=\"mini\" type=\"text\" style=\"margin-left:10px;\" on-click={ () => this.handleAddNext(data,node) }>添加下级</el-button>\r\n            </span>\r\n          </span>);\r\n      },\r\n      loadNode(node, resolve) {\r\n\t\t//    console.log(node);\r\n\t\t//   console.log(resolve);\r\n\t\tqueryAddressList({ level: node.level+1, parentId: node.key }).then(response => {\r\n\t\t\t\tresolve(response.data);\r\n\t\t\t});\r\n\t\t\r\n      }\r\n    }\r\n  };\r\n</script>"]}]}