{"remainingRequest":"G:\\vs_workspace\\git_sxq\\lmnb-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\vs_workspace\\git_sxq\\lmnb-web\\src\\views\\business\\charge\\chargeManager.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\vs_workspace\\git_sxq\\lmnb-web\\src\\views\\business\\charge\\chargeManager.vue","mtime":1697870999475},{"path":"G:\\vs_workspace\\git_sxq\\lmnb-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686317881343},{"path":"G:\\vs_workspace\\git_sxq\\lmnb-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1686317882159},{"path":"G:\\vs_workspace\\git_sxq\\lmnb-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686317881343},{"path":"G:\\vs_workspace\\git_sxq\\lmnb-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1686317877157}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCB7IHF1ZXJ5QWRkcmVzc0xpc3QgfSBmcm9tICdAL2FwaS9hZGRyZXNzTWFuYWdlcicNCmltcG9ydCB7IHF1ZXJ5TWV0ZXJBbmRVc2VyTGlzdCwgb3BlblZhbHZlQnlDb2RlLCBjbG9zZVZhbHZlQnlDb2RlIH0gZnJvbSAnQC9hcGkvbWV0ZXJNYW5hZ2VyJw0KaW1wb3J0IHsgaW5pdEFsbERpY3Rpb25hcnksIGdldERlc2NCeUJlYW5BdHRyVmFsdWUgfSBmcm9tICdAL2FwaS9kaWN0aW9uYXJ5TWFuYWdlcicNCmltcG9ydCB3YXZlcyBmcm9tICdAL2RpcmVjdGl2ZS93YXZlcycgLy8gd2F2ZXMgZGlyZWN0aXZlDQppbXBvcnQgeyBwYXJzZVRpbWUgfSBmcm9tICdAL3V0aWxzJw0KaW1wb3J0IFBhZ2luYXRpb24gZnJvbSAnQC9jb21wb25lbnRzL1BhZ2luYXRpb24nIC8vIHNlY29uZGFyeSBwYWNrYWdlIGJhc2VkIG9uIGVsLXBhZ2luYXRpb24NCg0KaW1wb3J0IGJpbGxEaWFsb2cgZnJvbSAnLi9iaWxsRGlhbG9nJw0KaW1wb3J0IGNoYXJnZUxvZ0RpYWxvZyBmcm9tICcuL2NoYXJnZUxvZ0RpYWxvZycNCmltcG9ydCBjaGFyZ2VEaWFsb2cgZnJvbSAnLi9jaGFyZ2VEaWFsb2cnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ0NoYXJnZVRhYmxlJywNCiAgY29tcG9uZW50czogeyBQYWdpbmF0aW9uLCBiaWxsRGlhbG9nLCBjaGFyZ2VMb2dEaWFsb2csIGNoYXJnZURpYWxvZyB9LA0KICBkaXJlY3RpdmVzOiB7IHdhdmVzIH0sDQogIGZpbHRlcnM6IHsNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgZmluZERlc2NCeVZhbHVlOiBnZXREZXNjQnlCZWFuQXR0clZhbHVlLA0KICAgICAgdGFibGVLZXk6IDAsDQogICAgICBsaXN0OiBudWxsLA0KICAgICAgdG90YWw6IDAsDQogICAgICByYWRpb01ldGVyOiB1bmRlZmluZWQsDQogICAgICBsaXN0TG9hZGluZzogdHJ1ZSwNCiAgICAgIGxpc3RRdWVyeTogew0KICAgICAgICBwYWdlOiAxLA0KICAgICAgICByb3dzOiAyMCwNCiAgICAgICAgaW1wb3J0YW5jZTogdW5kZWZpbmVkLA0KICAgICAgICB0aXRsZTogdW5kZWZpbmVkLA0KICAgICAgICB0eXBlOiB1bmRlZmluZWQsDQogICAgICAgIHNvcnQ6ICcraWQnDQogICAgICB9LA0KICAgICAgc2VsZWN0Um93OiB7fSwNCiAgICAgIGFyZWFMaXN0OiBbXSwNCiAgICAgIHNob3dSZXZpZXdlcjogZmFsc2UsDQogICAgICBkb3dubG9hZExvYWRpbmc6IGZhbHNlDQogICAgfQ0KICB9LA0KDQogIGNyZWF0ZWQoKSB7DQogICAgaW5pdEFsbERpY3Rpb25hcnkoKQ0KICAgIHRoaXMuZ2V0TGlzdCgpDQogICAgdGhpcy51cGRhdGVBZGRyZXNzTGlzdCgxLCBudWxsKQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBnZXRMaXN0KCkgew0KICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWUNCiAgICAgIHF1ZXJ5TWV0ZXJBbmRVc2VyTGlzdCh0aGlzLmxpc3RRdWVyeSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGENCiAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLnRvdGFsDQoNCiAgICAgICAgLy8gSnVzdCB0byBzaW11bGF0ZSB0aGUgdGltZSBvZiB0aGUgcmVxdWVzdA0KICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2UNCiAgICAgICAgfSwgMC41ICogMTAwMCkNCiAgICAgIH0pDQogICAgfSwNCiAgICB1cGRhdGVBZGRyZXNzTGlzdChsZXZlbCwgcGFyZW50SWQpIHsNCiAgICAgIGlmICghbGV2ZWwpIHsNCiAgICAgICAgbGV2ZWwgPSAxDQogICAgICB9DQogICAgICBxdWVyeUFkZHJlc3NMaXN0KHsgbGV2ZWw6IGxldmVsLCBwYXJlbnRJZDogcGFyZW50SWQgfSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIHRoaXMuYXJlYUxpc3RbbGV2ZWwgLSAxXSA9IHJlc3BvbnNlLmRhdGENCiAgICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIHVwZGF0ZUFsbEFyZWEodmFsLCBsZXZlbCkgew0KICAgICAgaWYgKGxldmVsID09IDEpIHsNCiAgICAgICAgdGhpcy5hcmVhTGlzdFsxXSA9IHt9DQogICAgICAgIHRoaXMuYXJlYUxpc3RbMl0gPSB7fQ0KICAgICAgICB0aGlzLmxpc3RRdWVyeS5hcmVhMiA9ICcnDQogICAgICAgIHRoaXMubGlzdFF1ZXJ5LmFyZWEzID0gJycNCiAgICAgIH0gZWxzZSBpZiAobGV2ZWwgPT0gMikgew0KICAgICAgICB0aGlzLmFyZWFMaXN0WzJdID0ge30NCiAgICAgICAgdGhpcy5saXN0UXVlcnkuYXJlYTMgPSAnJw0KICAgICAgfQ0KICAgICAgdmFyIG9iaiA9IHRoaXMuYXJlYUxpc3RbbGV2ZWwgLSAxXS5maW5kKG8gPT4gby5uYW1lID09PSB2YWwpDQoNCiAgICAgIHRoaXMudXBkYXRlQWRkcmVzc0xpc3QobGV2ZWwgKyAxLCBvYmouaWQpDQogICAgfSwNCiAgICBzZXRBcmVhMyh2YWwpIHsNCiAgICAgIHRoaXMubGlzdFF1ZXJ5LmFyZWEzID0gdmFsDQogICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpDQogICAgfSwNCiAgICBoYW5kbGVGaWx0ZXIoKSB7DQogICAgICB0aGlzLmxpc3RRdWVyeS5wYWdlID0gMQ0KICAgICAgdGhpcy5nZXRMaXN0KCkNCiAgICB9LA0KICAgIHJvd0NsaWNrKHJvdywgY29sdW1uLCBldmVudCkgew0KICAgICAgdGhpcy5zZWxlY3RSb3cgPSByb3cNCiAgICB9LA0KICAgIHNob3dCaWxsRGlhbG9nKCkgew0KICAgICAgaWYgKHRoaXMuJHJlZnMuYmlsbERpYWxvZy51c2VyaWQpIHsNCiAgICAgICAgdGhpcy4kcmVmcy5iaWxsRGlhbG9nLnVzZXJOYW1lID0gdGhpcy5zZWxlY3RSb3cudXNlck5hbWUgKyAn55qE5pyI6LSm5Y2VJw0KICAgICAgICB0aGlzLiRyZWZzLmJpbGxEaWFsb2cuZGlhbG9nVGFibGVWaXNpYmxlID0gdHJ1ZQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy4kbm90aWZ5KHsNCiAgICAgICAgICB0aXRsZTogJ+ivt+WFiOmAieaLqeeUqOaItycsDQogICAgICAgICAgbWVzc2FnZTogJ+ivt+WFiOmAieaLqeeUqOaIt++8jOWGjeafpeivoui0puWNlScsDQogICAgICAgICAgdHlwZTogJ2Vycm9yJywNCiAgICAgICAgICBkdXJhdGlvbjogMjAwMA0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgc2hvd0NoYXJnZUxvZ0RpYWxvZygpIHsNCiAgICAgIGlmICh0aGlzLiRyZWZzLmNoYXJnZUxvZ0RpYWxvZy51c2VyaWQpIHsNCiAgICAgICAgdGhpcy4kcmVmcy5jaGFyZ2VMb2dEaWFsb2cudXNlck5hbWUgPSB0aGlzLnNlbGVjdFJvdy51c2VyTmFtZSArICfnmoTlhYXlgLzorrDlvZUnDQogICAgICAgIHRoaXMuJHJlZnMuY2hhcmdlTG9nRGlhbG9nLmRpYWxvZ1RhYmxlVmlzaWJsZSA9IHRydWUNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuJG5vdGlmeSh7DQogICAgICAgICAgdGl0bGU6ICfor7flhYjpgInmi6nnlKjmiLcnLA0KICAgICAgICAgIG1lc3NhZ2U6ICfor7flhYjpgInmi6nnlKjmiLfvvIzlho3mn6Xor6LlhYXlgLzorrDlvZUnLA0KICAgICAgICAgIHR5cGU6ICdlcnJvcicsDQogICAgICAgICAgZHVyYXRpb246IDIwMDANCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICB9LA0KICAgIHNob3dDaGFyZ2VEaWFsb2coKSB7DQogICAgICBpZiAodGhpcy4kcmVmcy5jaGFyZ2VEaWFsb2cudXNlcmlkKSB7DQogICAgICAgIHRoaXMuJHJlZnMuY2hhcmdlRGlhbG9nLnVzZXJOYW1lID0gdGhpcy5zZWxlY3RSb3cudXNlck5hbWUNCiAgICAgICAgdGhpcy4kcmVmcy5jaGFyZ2VEaWFsb2cubWV0ZXJDb2RlID0gdGhpcy5zZWxlY3RSb3cuY29kZQ0KICAgICAgICB0aGlzLiRyZWZzLmNoYXJnZURpYWxvZy5iYWxhbmNlID0gdGhpcy5zZWxlY3RSb3cuYmFsYW5jZQ0KDQogICAgICAgIHRoaXMuJHJlZnMuY2hhcmdlRGlhbG9nLmRpYWxvZ1RhYmxlVmlzaWJsZSA9IHRydWUNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuJG5vdGlmeSh7DQogICAgICAgICAgdGl0bGU6ICfor7flhYjpgInmi6nnlKjmiLcnLA0KICAgICAgICAgIG1lc3NhZ2U6ICfor7flhYjpgInmi6nnlKjmiLfvvIzlho3ngrnlh7vlhYXlgLwnLA0KICAgICAgICAgIHR5cGU6ICdlcnJvcicsDQogICAgICAgICAgZHVyYXRpb246IDIwMDANCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICB9LA0KICAgIG9wZW5WYWx2ZSgpIHsNCiAgICAgIGlmICh0aGlzLnNlbGVjdFJvdy5jb2RlKSB7CiAgICAgICAgb3BlblZhbHZlQnlDb2RlKHsgY29kZTogdGhpcy5zZWxlY3RSb3cuY29kZSB9KS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICB0aGlzLiRub3RpZnkoew0KICAgICAgICAgICAgdGl0bGU6ICfmk43kvZznu5PmnpwnLA0KICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UubWVzc2FnZSwNCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywNCiAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwDQogICAgICAgICAgfSkNCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICB9LA0KICAgIGNsb3NlVmFsdmUoKSB7DQogICAgICBpZiAodGhpcy5zZWxlY3RSb3cuY29kZSkgew0KICAgICAgICBjbG9zZVZhbHZlQnlDb2RlKHsgY29kZTogdGhpcy5zZWxlY3RSb3cuY29kZSB9KS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICB0aGlzLiRub3RpZnkoew0KICAgICAgICAgICAgdGl0bGU6ICfmk43kvZznu5PmnpwnLA0KICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UubWVzc2FnZSwNCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywNCiAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwDQogICAgICAgICAgfSkNCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["chargeManager.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4NA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"chargeManager.vue","sourceRoot":"src/views/business/charge","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <div class=\"filter-container\">\r\n      <div class=\"demo-input-suffix\">\r\n        <el-input\r\n          v-model=\"listQuery.userName\"\r\n          placeholder=\"请输入户名\"\r\n          style=\"width: 200px;\"\r\n          class=\"filter-item\"\r\n          @keyup.enter.native=\"handleFilter\"\r\n        />\r\n        <el-input\r\n          v-model=\"listQuery.phone\"\r\n          placeholder=\"请输入电话\"\r\n          style=\"width: 200px;margin-left: 10px;\"\r\n          class=\"filter-item\"\r\n        />\r\n        <el-input\r\n          v-model=\"listQuery.idcard\"\r\n          placeholder=\"请输入证件号码\"\r\n          style=\"width: 200px;margin-left: 10px;\"\r\n          class=\"filter-item\"\r\n        />\r\n        <br>\r\n        <el-select\r\n          v-model=\"listQuery.area1\"\r\n          placeholder=\"请输入镇名\"\r\n          style=\"width: 200px;\"\r\n          class=\"filter-item\"\r\n          filterable\r\n          @change=\"updateAllArea($event,1)\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in areaList[0]\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.name\"\r\n          />\r\n        </el-select>\r\n        <el-select\r\n          v-model=\"listQuery.area2\"\r\n          placeholder=\"请输入村名\"\r\n          style=\"width: 200px;margin-left: 10px;\"\r\n          class=\"filter-item\"\r\n          filterable\r\n          @change=\"updateAllArea($event,2)\"\r\n        >\r\n          <el-option\r\n            v-for=\"item1 in areaList[1]\"\r\n            :key=\"item1.id\"\r\n            :label=\"item1.name\"\r\n            :value=\"item1.name\"\r\n          />\r\n        </el-select>\r\n        <el-select\r\n          v-model=\"listQuery.area3\"\r\n          placeholder=\"请输入组名\"\r\n          style=\"width: 200px;margin-left: 10px;\"\r\n          class=\"filter-item\"\r\n          filterable\r\n          @change=\"setArea3($event)\"\r\n        >\r\n          <el-option\r\n            v-for=\"item2 in areaList[2]\"\r\n            :key=\"item2.id\"\r\n            :label=\"item2.name\"\r\n            :value=\"item2.name\"\r\n          />\r\n        </el-select>\r\n        <div class=\"btn-group\">\r\n          <el-button\r\n            v-waves\r\n            class=\"filter-item\"\r\n            type=\"primary\"\r\n            icon=\"el-icon-search\"\r\n            style=\"margin-left: 10px;\"\r\n            @click=\"handleFilter\"\r\n          >查询</el-button>\r\n          <el-button\r\n            class=\"filter-item\"\r\n            style=\"margin-left: 10px;\"\r\n            type=\"success\"\r\n            icon=\"el-icon-money\"\r\n            @click=\"showChargeDialog\"\r\n          >充值</el-button>\r\n          <el-button\r\n            v-waves\r\n            :loading=\"downloadLoading\"\r\n            style=\"margin-left: 10px;\"\r\n            class=\"filter-item\"\r\n            type=\"primary\"\r\n            icon=\"el-icon-check\"\r\n            @click=\"openValve\"\r\n          >开阀</el-button>\r\n          <el-button\r\n            v-waves\r\n            :loading=\"downloadLoading\"\r\n            style=\"margin-left: 10px;\"\r\n            class=\"filter-item\"\r\n            type=\"primary\"\r\n            icon=\"el-icon-close\"\r\n            @click=\"closeValve\"\r\n          >关阀</el-button>\r\n          <el-button\r\n            v-waves\r\n            :loading=\"downloadLoading\"\r\n            style=\"margin-left: 10px;\"\r\n            class=\"filter-item\"\r\n            type=\"warning\"\r\n            icon=\"el-icon-s-order\"\r\n            @click=\"showChargeLogDialog\"\r\n          >充值记录</el-button>\r\n          <el-button\r\n            v-waves\r\n            style=\"margin-left: 10px;\"\r\n            class=\"filter-item\"\r\n            type=\"warning\"\r\n            icon=\"el-icon-s-operation\"\r\n            @click=\"showBillDialog\"\r\n          >账单记录</el-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <el-table\r\n      :key=\"tableKey\"\r\n      v-loading=\"listLoading\"\r\n      :data=\"list\"\r\n      border\r\n      fit\r\n      highlight-current-row\r\n      style=\"width: 100%;\"\r\n      @row-click=\"rowClick\"\r\n    >\r\n      <el-table-column\r\n        label=\"水表ID\"\r\n        prop=\"id\"\r\n        sortable=\"custom\"\r\n        align=\"center\"\r\n        width=\"80\"\r\n      >\r\n        <template slot-scope=\"{row}\">\r\n          <span> {{ row.id }} </span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"户名\" align=\"center\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.userName }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"余额\" align=\"center\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.balance }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"最近缴费时间\" align=\"center\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.lastbuytime }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"最近缴费金额\" align=\"center\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.lastbuyamount }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"阀门\" align=\"center\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ findDescByValue('meterModel','valvestate',row.valvestate) }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"电话\" width=\"110px\" align=\"center\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.phone }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"表号\" width=\"150px\" align=\"center\" :show-overflow-tooltip=\"true\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.code }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"地址\" min-width=\"150px\" :show-overflow-tooltip=\"true\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.area1 }} - {{ row.area2 }} - {{ row.area3 }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"身份证号\" width=\"110px\" align=\"center\" :show-overflow-tooltip=\"true\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.idcard }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"操作\"\r\n        align=\"center\"\r\n        class-name=\"small-padding fixed-width\"\r\n        fixed=\"right\"\r\n      >\r\n        <template slot-scope=\"{row}\">\r\n          <el-button type=\"primary\" size=\"mini\" @click=\"handleUpdate(row)\">编辑</el-button>\r\n          <!--           <el-button   type=\"danger\" size=\"mini\"  @click=\"handleDelete(row,$index)\">\r\n                      删除\r\n          </el-button>-->\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <pagination\r\n      v-show=\"total>0\"\r\n      :total=\"total\"\r\n      :page.sync=\"listQuery.page\"\r\n      :limit.sync=\"listQuery.rows\"\r\n      @pagination=\"getList\"\r\n    />\r\n    <billDialog ref=\"billDialog\" :userid=\"selectRow.userid\" :user-name=\"selectRow.userName\" :meter-code=\"selectRow.code\" />\r\n    <chargeLogDialog ref=\"chargeLogDialog\" :userid=\"selectRow.userid\" :user-name=\"selectRow.userName\" :meter-code=\"selectRow.code\" />\r\n    <chargeDialog ref=\"chargeDialog\" :userid=\"selectRow.userid\" :user-name=\"selectRow.userName\" :meter-code=\"selectRow.code\" :balance=\"selectRow.balance\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { queryAddressList } from '@/api/addressManager'\r\nimport { queryMeterAndUserList, openValveByCode, closeValveByCode } from '@/api/meterManager'\r\nimport { initAllDictionary, getDescByBeanAttrValue } from '@/api/dictionaryManager'\r\nimport waves from '@/directive/waves' // waves directive\r\nimport { parseTime } from '@/utils'\r\nimport Pagination from '@/components/Pagination' // secondary package based on el-pagination\r\n\r\nimport billDialog from './billDialog'\r\nimport chargeLogDialog from './chargeLogDialog'\r\nimport chargeDialog from './chargeDialog'\r\n\r\nexport default {\r\n  name: 'ChargeTable',\r\n  components: { Pagination, billDialog, chargeLogDialog, chargeDialog },\r\n  directives: { waves },\r\n  filters: {\r\n  },\r\n  data() {\r\n    return {\r\n      findDescByValue: getDescByBeanAttrValue,\r\n      tableKey: 0,\r\n      list: null,\r\n      total: 0,\r\n      radioMeter: undefined,\r\n      listLoading: true,\r\n      listQuery: {\r\n        page: 1,\r\n        rows: 20,\r\n        importance: undefined,\r\n        title: undefined,\r\n        type: undefined,\r\n        sort: '+id'\r\n      },\r\n      selectRow: {},\r\n      areaList: [],\r\n      showReviewer: false,\r\n      downloadLoading: false\r\n    }\r\n  },\r\n\r\n  created() {\r\n    initAllDictionary()\r\n    this.getList()\r\n    this.updateAddressList(1, null)\n  },\r\n  methods: {\r\n    getList() {\r\n      this.listLoading = true\r\n      queryMeterAndUserList(this.listQuery).then(response => {\r\n        this.list = response.data\r\n        this.total = response.total\r\n\r\n        // Just to simulate the time of the request\r\n        setTimeout(() => {\r\n          this.listLoading = false\r\n        }, 0.5 * 1000)\r\n      })\r\n    },\r\n    updateAddressList(level, parentId) {\r\n      if (!level) {\r\n        level = 1\r\n      }\r\n      queryAddressList({ level: level, parentId: parentId }).then(response => {\r\n        this.areaList[level - 1] = response.data\r\n        this.$forceUpdate()\r\n      })\r\n    },\r\n    updateAllArea(val, level) {\r\n      if (level == 1) {\r\n        this.areaList[1] = {}\r\n        this.areaList[2] = {}\r\n        this.listQuery.area2 = ''\r\n        this.listQuery.area3 = ''\r\n      } else if (level == 2) {\r\n        this.areaList[2] = {}\r\n        this.listQuery.area3 = ''\r\n      }\r\n      var obj = this.areaList[level - 1].find(o => o.name === val)\r\n\r\n      this.updateAddressList(level + 1, obj.id)\r\n    },\r\n    setArea3(val) {\r\n      this.listQuery.area3 = val\r\n      this.$forceUpdate()\r\n    },\r\n    handleFilter() {\r\n      this.listQuery.page = 1\r\n      this.getList()\r\n    },\r\n    rowClick(row, column, event) {\r\n      this.selectRow = row\r\n    },\r\n    showBillDialog() {\r\n      if (this.$refs.billDialog.userid) {\r\n        this.$refs.billDialog.userName = this.selectRow.userName + '的月账单'\r\n        this.$refs.billDialog.dialogTableVisible = true\r\n      } else {\r\n        this.$notify({\r\n          title: '请先选择用户',\r\n          message: '请先选择用户，再查询账单',\r\n          type: 'error',\r\n          duration: 2000\r\n        })\r\n      }\r\n    },\r\n    showChargeLogDialog() {\r\n      if (this.$refs.chargeLogDialog.userid) {\r\n        this.$refs.chargeLogDialog.userName = this.selectRow.userName + '的充值记录'\r\n        this.$refs.chargeLogDialog.dialogTableVisible = true\r\n      } else {\r\n        this.$notify({\r\n          title: '请先选择用户',\r\n          message: '请先选择用户，再查询充值记录',\r\n          type: 'error',\r\n          duration: 2000\r\n        })\r\n      }\r\n    },\r\n    showChargeDialog() {\r\n      if (this.$refs.chargeDialog.userid) {\r\n        this.$refs.chargeDialog.userName = this.selectRow.userName\r\n        this.$refs.chargeDialog.meterCode = this.selectRow.code\r\n        this.$refs.chargeDialog.balance = this.selectRow.balance\r\n\r\n        this.$refs.chargeDialog.dialogTableVisible = true\r\n      } else {\r\n        this.$notify({\r\n          title: '请先选择用户',\r\n          message: '请先选择用户，再点击充值',\r\n          type: 'error',\r\n          duration: 2000\r\n        })\r\n      }\r\n    },\r\n    openValve() {\r\n      if (this.selectRow.code) {\n        openValveByCode({ code: this.selectRow.code }).then(response => {\r\n          this.$notify({\r\n            title: '操作结果',\r\n            message: response.message,\r\n            type: 'success',\r\n            duration: 2000\r\n          })\r\n        })\r\n      }\r\n    },\r\n    closeValve() {\r\n      if (this.selectRow.code) {\r\n        closeValveByCode({ code: this.selectRow.code }).then(response => {\r\n          this.$notify({\r\n            title: '操作结果',\r\n            message: response.message,\r\n            type: 'success',\r\n            duration: 2000\r\n          })\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}