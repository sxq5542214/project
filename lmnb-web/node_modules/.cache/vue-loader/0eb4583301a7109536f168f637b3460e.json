{"remainingRequest":"G:\\vs_workspace\\git_sxq\\lmnb-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\vs_workspace\\git_sxq\\lmnb-web\\src\\views\\business\\user\\meterTab\\meterTab.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\vs_workspace\\git_sxq\\lmnb-web\\src\\views\\business\\user\\meterTab\\meterTab.vue","mtime":1697505240631},{"path":"G:\\vs_workspace\\git_sxq\\lmnb-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686317881343},{"path":"G:\\vs_workspace\\git_sxq\\lmnb-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1686317882159},{"path":"G:\\vs_workspace\\git_sxq\\lmnb-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686317881343},{"path":"G:\\vs_workspace\\git_sxq\\lmnb-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1686317877157}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBxdWVyeVByaWNlTGlzdCB9IGZyb20gJ0AvYXBpL3ByaWNlTWFuYWdlcicNCmltcG9ydCB7IHF1ZXJ5U3VwcGxpZXJMaXN0IH0gZnJvbSAnQC9hcGkvc3VwcGxpZXJNYW5hZ2VyJw0KaW1wb3J0IHsgcXVlcnlQcm9kdWN0TGlzdCB9IGZyb20gJ0AvYXBpL3Byb2R1Y3RNYW5hZ2VyJw0KaW1wb3J0IHsgZmluZE1ldGVyQnlDb2RlIH0gZnJvbSAnQC9hcGkvbWV0ZXJNYW5hZ2VyJw0KaW1wb3J0IHsgcXVlcnlNZXRlckNhbGliZXJMaXN0LCBxdWVyeU1ldGVyT3BlbmVkTGlzdCB9IGZyb20gJ0AvYXBpL2RpY3Rpb25hcnlNYW5hZ2VyJw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGZpbHRlcnM6IHsNCiAgfSwNCiAgcHJvcHM6IHsNCiAgICB0eXBlOiB7IH0sDQogICAgY3VyTWV0ZXI6IHt9DQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGxpc3Q6IG51bGwsDQogICAgICB2YWxpZGF0ZUZsYWc6IGZhbHNlLA0KICAgICAgbWV0ZXI6IHsgYmFzZW51bTogMCwgY29kZTogJycsIGluc3RhbGxwb3NpdGlvbjogJycsIGZhY3Rvcnljb2RlOiAnJywgcHJpY2Vjb2RlOiAnJywgcHJvZHVjdGlkOiAnJywgY2FsaWJlcjogJycsIG9wZW5lZDogJycsIHVzZXJpZDogJycsIGlkOiB1bmRlZmluZWQgfSwNCiAgICAgIHByaWNlTGlzdDoge30sDQogICAgICBzdXBwbGllckxpc3Q6IHt9LA0KICAgICAgcHJvZHVjdExpc3Q6IHt9LA0KICAgICAgY2FsaWJlckxpc3Q6IHt9LA0KICAgICAgb3BlbmVkTGlzdDoge30sDQogICAgICBpc0Rpc2FibGVkOiBmYWxzZSwNCiAgICAgIGxpc3RRdWVyeTogew0KICAgICAgICBwYWdlOiAxLA0KICAgICAgICBsaW1pdDogNSwNCiAgICAgICAgLy8gdHlwZTogdGhpcy50eXBlLA0KICAgICAgICBzb3J0OiAnK2lkJw0KICAgICAgfSwNCiAgICAgIHJ1bGVzOiB7DQogICAgICAgIGNvZGU6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl6KGo5Y+3JyB9XQ0KICAgICAgfSwNCiAgICAgIGxvYWRpbmc6IGZhbHNlDQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuZ2V0TGlzdCgpDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICB2YWxpZGF0ZUZvcm0oKSB7DQogICAgICB0aGlzLiRyZWZzWydkYXRhRm9ybSddLnZhbGlkYXRlKHZhbGlkID0+IHsNCiAgICAgICAgdGhpcy52YWxpZGF0ZUZsYWcgPSB2YWxpZAogICAgICB9KQ0KICAgIH0sDQoNCiAgICBnZXRNZXRlcigpIHsNCiAgICAgIHJldHVybiB0aGlzLm1ldGVyDQogICAgfSwNCg0KICAgIGdldExpc3QoKSB7DQogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlDQogICAgICB0aGlzLm1ldGVyLmNvZGUgPSB0aGlzLmN1ck1ldGVyLmNvZGUNCiAgICAgIHRoaXMubWV0ZXIuaW5zdGFsbHBvc2l0aW9uID0gdGhpcy5jdXJNZXRlci5pbnN0YWxscG9zaXRpb24NCiAgICAgIC8vIHRoaXMuJGVtaXQoImNyZWF0ZSIpOyAvLyBmb3IgdGVzdA0KDQogICAgICBxdWVyeVN1cHBsaWVyTGlzdCgpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLnN1cHBsaWVyTGlzdCA9IHJlc3BvbnNlLmRhdGENCiAgICAgICAgdGhpcy5tZXRlci5mYWN0b3J5Y29kZSA9IHJlc3BvbnNlLmRhdGFbMF0uaWQNCiAgICAgIH0pDQogICAgICBxdWVyeVByaWNlTGlzdCgpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLnByaWNlTGlzdCA9IHJlc3BvbnNlLmRhdGENCiAgICAgICAgdGhpcy5tZXRlci5wcmljZWNvZGUgPSByZXNwb25zZS5kYXRhWzBdLmlkDQogICAgICB9KQ0KICAgICAgcXVlcnlQcm9kdWN0TGlzdCgpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLnByb2R1Y3RMaXN0ID0gcmVzcG9uc2UuZGF0YQ0KICAgICAgICB0aGlzLm1ldGVyLnByb2R1Y3RpZCA9IHJlc3BvbnNlLmRhdGFbMF0uaWQNCiAgICAgIH0pDQogICAgICBxdWVyeU1ldGVyQ2FsaWJlckxpc3QoKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgdGhpcy5jYWxpYmVyTGlzdCA9IHJlc3BvbnNlLmRhdGENCiAgICAgICAgdGhpcy5tZXRlci5jYWxpYmVyID0gcmVzcG9uc2UuZGF0YVswXS52YWx1ZQ0KICAgICAgfSkNCiAgICAgIHF1ZXJ5TWV0ZXJPcGVuZWRMaXN0KCkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIHRoaXMub3BlbmVkTGlzdCA9IHJlc3BvbnNlLmRhdGENCiAgICAgICAgdGhpcy5tZXRlci5vcGVuZWQgPSByZXNwb25zZS5kYXRhWzBdLnZhbHVlCiAgICAgIH0pDQogICAgICBpZiAodGhpcy5jdXJNZXRlci5jb2RlICE9ICfmlrDlop7msLTooagnKSB7DQogICAgICAgIC8vIOWKoOi9veaVsOaNrg0KICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICB0aGlzLm1ldGVyLmJhc2VudW0gPSB0aGlzLmN1ck1ldGVyLmJhc2VudW0NCiAgICAgICAgICB0aGlzLm1ldGVyLmZhY3Rvcnljb2RlID0gTnVtYmVyKHRoaXMuY3VyTWV0ZXIuZmFjdG9yeWNvZGUpDQogICAgICAgICAgdGhpcy5tZXRlci5wcmljZWNvZGUgPSB0aGlzLmN1ck1ldGVyLnByaWNlY29kZQ0KICAgICAgICAgIHRoaXMubWV0ZXIucHJvZHVjdGlkID0gdGhpcy5jdXJNZXRlci5wcm9kdWN0aWQNCiAgICAgICAgICB0aGlzLm1ldGVyLmNhbGliZXIgPSB0aGlzLmN1ck1ldGVyLmNhbGliZXINCiAgICAgICAgICB0aGlzLm1ldGVyLm9wZW5lZCA9IHRoaXMuY3VyTWV0ZXIub3BlbmVkICsgJycNCiAgICAgICAgICB0aGlzLm1ldGVyLnVzZXJpZCA9IHRoaXMuY3VyTWV0ZXIudXNlcmlkDQogICAgICAgICAgdGhpcy5tZXRlci5pZCA9IHRoaXMuY3VyTWV0ZXIuaWQNCiAgICAgICAgICB0aGlzLmlzRGlzYWJsZWQgPSB0cnVlDQoNCiAgICAgICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpDQogICAgICAgIH0sIDAuNSAqIDEwMDApDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLm1ldGVyLmNvZGUgPSAnJw0KICAgICAgfQ0KICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["meterTab.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"meterTab.vue","sourceRoot":"src/views/business/user/meterTab","sourcesContent":["<template>\r\n  <el-form\r\n    ref=\"dataForm\"\r\n    :rules=\"rules\"\r\n    :model=\"meter\"\r\n    :inline=\"true\"\r\n    label-position=\"left\"\r\n    label-width=\"auto\"\r\n    style=\" \"\r\n  >\r\n    <el-form-item label=\"表号\" prop=\"code\">\r\n      <el-input v-model=\"meter.code\" placeholder=\"请输入表号\" />\r\n    </el-form-item>\r\n    <el-form-item label=\"表地址\" prop=\"installposition\">\r\n      <el-input v-model=\"meter.installposition\" placeholder=\"请输入表安装地址\" />\r\n    </el-form-item>\r\n    <el-form-item label=\"表底数\" prop=\"basenum\">\r\n      <el-input v-model=\"meter.basenum\" placeholder=\"请输入用户名称\" :disabled=\"isDisabled\" />\r\n    </el-form-item>\r\n    <el-form-item label=\"价格类型\" prop=\"pricecode\">\r\n      <el-select v-model=\"meter.pricecode\" placeholder=\"请选择\" class=\"filter-item\" filterable>\r\n        <el-option v-for=\"item in priceList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\" />\r\n      </el-select>\r\n    </el-form-item>\r\n    <el-form-item label=\"厂商\" prop=\"factorycode\">\r\n      <el-select v-model=\"meter.factorycode\" placeholder=\"请选择\" class=\"filter-item\" filterable>\r\n        <el-option v-for=\"item in supplierList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\" />\r\n      </el-select>\r\n    </el-form-item>\r\n    <el-form-item label=\"产品类型\" prop=\"productid\">\r\n      <el-select v-model=\"meter.productid\" placeholder=\"请选择\" class=\"filter-item\" filterable>\r\n        <el-option v-for=\"item in productList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\" />\r\n      </el-select>\r\n    </el-form-item>\r\n    <el-form-item label=\"口径\" prop=\"caliber\">\r\n      <el-select v-model=\"meter.caliber\" placeholder=\"请选择\" class=\"filter-item\" filterable>\r\n        <el-option\r\n          v-for=\"item in caliberList\"\r\n          :key=\"item.value\"\r\n          :label=\"item.description\"\r\n          :value=\"item.value\"\r\n        />\r\n      </el-select>\r\n    </el-form-item>\r\n    <el-form-item label=\"账户状态\" prop=\"opened\">\r\n      <el-select v-model=\"meter.opened\" placeholder=\"请选择\" class=\"filter-item\" filterable>\r\n        <el-option\r\n          v-for=\"item in openedList\"\r\n          :key=\"item.value\"\r\n          :label=\"item.description\"\r\n          :value=\"item.value\"\r\n        />\r\n      </el-select>\r\n    </el-form-item>\r\n  </el-form>\r\n</template>\r\n\r\n<script>\r\nimport { queryPriceList } from '@/api/priceManager'\r\nimport { querySupplierList } from '@/api/supplierManager'\r\nimport { queryProductList } from '@/api/productManager'\r\nimport { findMeterByCode } from '@/api/meterManager'\r\nimport { queryMeterCaliberList, queryMeterOpenedList } from '@/api/dictionaryManager'\r\n\r\nexport default {\r\n  filters: {\r\n  },\r\n  props: {\r\n    type: { },\r\n    curMeter: {}\r\n  },\r\n  data() {\r\n    return {\r\n      list: null,\r\n      validateFlag: false,\r\n      meter: { basenum: 0, code: '', installposition: '', factorycode: '', pricecode: '', productid: '', caliber: '', opened: '', userid: '', id: undefined },\r\n      priceList: {},\r\n      supplierList: {},\r\n      productList: {},\r\n      caliberList: {},\r\n      openedList: {},\r\n      isDisabled: false,\r\n      listQuery: {\r\n        page: 1,\r\n        limit: 5,\r\n        // type: this.type,\r\n        sort: '+id'\r\n      },\r\n      rules: {\r\n        code: [{ required: true, message: '请输入表号' }]\r\n      },\r\n      loading: false\r\n    }\r\n  },\r\n  created() {\r\n    this.getList()\r\n  },\r\n  methods: {\r\n    validateForm() {\r\n      this.$refs['dataForm'].validate(valid => {\r\n        this.validateFlag = valid\n      })\r\n    },\r\n\r\n    getMeter() {\r\n      return this.meter\r\n    },\r\n\r\n    getList() {\r\n      this.loading = true\r\n      this.meter.code = this.curMeter.code\r\n      this.meter.installposition = this.curMeter.installposition\r\n      // this.$emit(\"create\"); // for test\r\n\r\n      querySupplierList().then(response => {\r\n        this.supplierList = response.data\r\n        this.meter.factorycode = response.data[0].id\r\n      })\r\n      queryPriceList().then(response => {\r\n        this.priceList = response.data\r\n        this.meter.pricecode = response.data[0].id\r\n      })\r\n      queryProductList().then(response => {\r\n        this.productList = response.data\r\n        this.meter.productid = response.data[0].id\r\n      })\r\n      queryMeterCaliberList().then(response => {\r\n        this.caliberList = response.data\r\n        this.meter.caliber = response.data[0].value\r\n      })\r\n      queryMeterOpenedList().then(response => {\r\n        this.openedList = response.data\r\n        this.meter.opened = response.data[0].value\n      })\r\n      if (this.curMeter.code != '新增水表') {\r\n        // 加载数据\r\n        setTimeout(() => {\r\n          this.meter.basenum = this.curMeter.basenum\r\n          this.meter.factorycode = Number(this.curMeter.factorycode)\r\n          this.meter.pricecode = this.curMeter.pricecode\r\n          this.meter.productid = this.curMeter.productid\r\n          this.meter.caliber = this.curMeter.caliber\r\n          this.meter.opened = this.curMeter.opened + ''\r\n          this.meter.userid = this.curMeter.userid\r\n          this.meter.id = this.curMeter.id\r\n          this.isDisabled = true\r\n\r\n          this.$forceUpdate()\r\n        }, 0.5 * 1000)\r\n      } else {\r\n        this.meter.code = ''\r\n      }\r\n      this.loading = false\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n"]}]}