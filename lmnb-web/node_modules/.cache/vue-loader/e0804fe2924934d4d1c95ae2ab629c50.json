{"remainingRequest":"G:\\git\\project\\.git\\lm\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\git\\project\\.git\\lm\\src\\views\\business\\charge\\chargeManager.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\git\\project\\.git\\lm\\src\\views\\business\\charge\\chargeManager.vue","mtime":1697459964278},{"path":"G:\\git\\project\\.git\\lm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686317881343},{"path":"G:\\git\\project\\.git\\lm\\node_modules\\babel-loader\\lib\\index.js","mtime":1686317882159},{"path":"G:\\git\\project\\.git\\lm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686317881343},{"path":"G:\\git\\project\\.git\\lm\\node_modules\\vue-loader\\lib\\index.js","mtime":1686317877157}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCg0KaW1wb3J0IHsgcXVlcnlBZGRyZXNzTGlzdCB9IGZyb20gIkAvYXBpL2FkZHJlc3NNYW5hZ2VyIjsNCiAgaW1wb3J0IHsgcXVlcnlNZXRlckFuZFVzZXJMaXN0LCBvcGVuVmFsdmVCeUNvZGUsIGNsb3NlVmFsdmVCeUNvZGUgfSBmcm9tICJAL2FwaS9tZXRlck1hbmFnZXIiOw0KaW1wb3J0IHsgaW5pdEFsbERpY3Rpb25hcnksIGdldERlc2NCeUJlYW5BdHRyVmFsdWUgfSBmcm9tICJAL2FwaS9kaWN0aW9uYXJ5TWFuYWdlciI7DQppbXBvcnQgd2F2ZXMgZnJvbSAiQC9kaXJlY3RpdmUvd2F2ZXMiOyAvLyB3YXZlcyBkaXJlY3RpdmUNCmltcG9ydCB7IHBhcnNlVGltZSB9IGZyb20gIkAvdXRpbHMiOw0KaW1wb3J0IFBhZ2luYXRpb24gZnJvbSAiQC9jb21wb25lbnRzL1BhZ2luYXRpb24iOyAvLyBzZWNvbmRhcnkgcGFja2FnZSBiYXNlZCBvbiBlbC1wYWdpbmF0aW9uDQoNCmltcG9ydCBiaWxsRGlhbG9nIGZyb20gIi4vYmlsbERpYWxvZyI7DQppbXBvcnQgY2hhcmdlTG9nRGlhbG9nIGZyb20gIi4vY2hhcmdlTG9nRGlhbG9nIjsNCmltcG9ydCBjaGFyZ2VEaWFsb2cgZnJvbSAiLi9jaGFyZ2VEaWFsb2ciOw0KDQoNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiY2hhcmdlVGFibGUiLA0KICBjb21wb25lbnRzOiB7IFBhZ2luYXRpb24gLGJpbGxEaWFsb2csIGNoYXJnZUxvZ0RpYWxvZyAsY2hhcmdlRGlhbG9nIH0sDQogIGRpcmVjdGl2ZXM6IHsgd2F2ZXMgfSwNCiAgZmlsdGVyczogew0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBmaW5kRGVzY0J5VmFsdWUgOiBnZXREZXNjQnlCZWFuQXR0clZhbHVlLA0KICAgICAgdGFibGVLZXk6IDAsDQogICAgICBsaXN0OiBudWxsLA0KICAgICAgdG90YWw6IDAsDQogICAgICByYWRpb01ldGVyOiB1bmRlZmluZWQgLA0KICAgICAgbGlzdExvYWRpbmc6IHRydWUsDQogICAgICBsaXN0UXVlcnk6IHsNCiAgICAgICAgcGFnZTogMSwNCiAgICAgICAgcm93czogMjAsDQogICAgICAgIGltcG9ydGFuY2U6IHVuZGVmaW5lZCwNCiAgICAgICAgdGl0bGU6IHVuZGVmaW5lZCwNCiAgICAgICAgdHlwZTogdW5kZWZpbmVkLA0KICAgICAgICBzb3J0OiAiK2lkIg0KICAgICAgfSwNCiAgICAgIHNlbGVjdFJvdzp7fSwNCiAgICAgIGFyZWFMaXN0OiBbXSwNCiAgICAgIHNob3dSZXZpZXdlcjogZmFsc2UsDQogICAgICBkb3dubG9hZExvYWRpbmc6IGZhbHNlDQogICAgfTsNCiAgfSwNCg0KICBjcmVhdGVkKCkgew0KICAgIGluaXRBbGxEaWN0aW9uYXJ5KCk7DQogICAgdGhpcy5nZXRMaXN0KCk7DQogICAgdGhpcy51cGRhdGVBZGRyZXNzTGlzdCgxLCBudWxsKTsNCg0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZ2V0TGlzdCgpIHsNCiAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlOw0KICAgICAgcXVlcnlNZXRlckFuZFVzZXJMaXN0KHRoaXMubGlzdFF1ZXJ5KS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YTsNCiAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLnRvdGFsOw0KDQogICAgICAgIC8vIEp1c3QgdG8gc2ltdWxhdGUgdGhlIHRpbWUgb2YgdGhlIHJlcXVlc3QNCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlOw0KICAgICAgICB9LCAwLjUgKiAxMDAwKTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgdXBkYXRlQWRkcmVzc0xpc3QobGV2ZWwsIHBhcmVudElkKSB7DQogICAgICBpZiAoIWxldmVsKSB7DQogICAgICAgIGxldmVsID0gMTsNCiAgICAgIH0NCiAgICAgIHF1ZXJ5QWRkcmVzc0xpc3QoeyBsZXZlbDogbGV2ZWwsIHBhcmVudElkOiBwYXJlbnRJZCB9KS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgdGhpcy5hcmVhTGlzdFtsZXZlbCAtIDFdID0gcmVzcG9uc2UuZGF0YTsNCiAgICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgdXBkYXRlQWxsQXJlYSh2YWwsIGxldmVsKSB7DQogICAgICBpZiAobGV2ZWwgPT0gMSkgew0KICAgICAgICB0aGlzLmFyZWFMaXN0WzFdID0ge307DQogICAgICAgIHRoaXMuYXJlYUxpc3RbMl0gPSB7fTsNCiAgICAgICAgdGhpcy5saXN0UXVlcnkuYXJlYTIgPSAiIjsNCiAgICAgICAgdGhpcy5saXN0UXVlcnkuYXJlYTMgPSAiIjsNCiAgICAgIH0gZWxzZSBpZiAobGV2ZWwgPT0gMikgew0KICAgICAgICB0aGlzLmFyZWFMaXN0WzJdID0ge307DQogICAgICAgIHRoaXMubGlzdFF1ZXJ5LmFyZWEzID0gIiI7DQogICAgICB9DQogICAgICB2YXIgb2JqID0gdGhpcy5hcmVhTGlzdFtsZXZlbCAtIDFdLmZpbmQobyA9PiBvLm5hbWUgPT09IHZhbCk7DQoNCiAgICAgIHRoaXMudXBkYXRlQWRkcmVzc0xpc3QobGV2ZWwgKyAxLCBvYmouaWQpOw0KICAgIH0sDQogICAgc2V0QXJlYTModmFsKSB7DQogICAgICB0aGlzLmxpc3RRdWVyeS5hcmVhMyA9IHZhbDsNCiAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCk7DQogICAgfSwNCiAgICBoYW5kbGVGaWx0ZXIoKSB7DQogICAgICB0aGlzLmxpc3RRdWVyeS5wYWdlID0gMTsNCiAgICAgIHRoaXMuZ2V0TGlzdCgpOw0KICAgIH0sDQogICAgcm93Q2xpY2soCXJvdywgY29sdW1uLCBldmVudCl7DQogICAgICB0aGlzLnNlbGVjdFJvdyA9IHJvdzsNCiAgICB9LA0KICAgIHNob3dCaWxsRGlhbG9nKCkgew0KICAgICAgaWYodGhpcy4kcmVmcy5iaWxsRGlhbG9nLnVzZXJpZCl7DQogICAgICAgIHRoaXMuJHJlZnMuYmlsbERpYWxvZy51c2VyTmFtZSA9IHRoaXMuc2VsZWN0Um93LnVzZXJOYW1lICsn55qE5pyI6LSm5Y2VJzsNCiAgICAgICAgdGhpcy4kcmVmcy5iaWxsRGlhbG9nLmRpYWxvZ1RhYmxlVmlzaWJsZSA9IHRydWU7DQogICAgICB9ZWxzZXsNCiAgICAgICAgdGhpcy4kbm90aWZ5KHsNCiAgICAgICAgICB0aXRsZTogIuivt+WFiOmAieaLqeeUqOaItyIsDQogICAgICAgICAgbWVzc2FnZTogIuivt+WFiOmAieaLqeeUqOaIt++8jOWGjeafpeivoui0puWNlSIsDQogICAgICAgICAgdHlwZTogImVycm9yIiwNCiAgICAgICAgICBkdXJhdGlvbjogMjAwMA0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIHNob3dDaGFyZ2VMb2dEaWFsb2coKSB7DQogICAgICBpZih0aGlzLiRyZWZzLmNoYXJnZUxvZ0RpYWxvZy51c2VyaWQpew0KICAgICAgICB0aGlzLiRyZWZzLmNoYXJnZUxvZ0RpYWxvZy51c2VyTmFtZSA9IHRoaXMuc2VsZWN0Um93LnVzZXJOYW1lICsn55qE5YWF5YC86K6w5b2VJzsNCiAgICAgICAgdGhpcy4kcmVmcy5jaGFyZ2VMb2dEaWFsb2cuZGlhbG9nVGFibGVWaXNpYmxlID0gdHJ1ZTsNCiAgICAgIH1lbHNlew0KICAgICAgICB0aGlzLiRub3RpZnkoew0KICAgICAgICAgIHRpdGxlOiAi6K+35YWI6YCJ5oup55So5oi3IiwNCiAgICAgICAgICBtZXNzYWdlOiAi6K+35YWI6YCJ5oup55So5oi377yM5YaN5p+l6K+i5YWF5YC86K6w5b2VIiwNCiAgICAgICAgICB0eXBlOiAiZXJyb3IiLA0KICAgICAgICAgIGR1cmF0aW9uOiAyMDAwDQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQogICAgc2hvd0NoYXJnZURpYWxvZygpIHsNCiAgICAgIGlmICh0aGlzLiRyZWZzLmNoYXJnZURpYWxvZy51c2VyaWQpIHsNCiAgICAgICAgdGhpcy4kcmVmcy5jaGFyZ2VEaWFsb2cudXNlck5hbWUgPSB0aGlzLnNlbGVjdFJvdy51c2VyTmFtZTsNCiAgICAgICAgdGhpcy4kcmVmcy5jaGFyZ2VEaWFsb2cubWV0ZXJDb2RlID0gdGhpcy5zZWxlY3RSb3cuY29kZTsNCiAgICAgICAgdGhpcy4kcmVmcy5jaGFyZ2VEaWFsb2cuYmFsYW5jZSA9IHRoaXMuc2VsZWN0Um93LmJhbGFuY2U7DQoNCiAgICAgICAgdGhpcy4kcmVmcy5jaGFyZ2VEaWFsb2cuZGlhbG9nVGFibGVWaXNpYmxlID0gdHJ1ZTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuJG5vdGlmeSh7DQogICAgICAgICAgdGl0bGU6ICLor7flhYjpgInmi6nnlKjmiLciLA0KICAgICAgICAgIG1lc3NhZ2U6ICLor7flhYjpgInmi6nnlKjmiLfvvIzlho3ngrnlh7vlhYXlgLwiLA0KICAgICAgICAgIHR5cGU6ICJlcnJvciIsDQogICAgICAgICAgZHVyYXRpb246IDIwMDANCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfSwNCiAgICBvcGVuVmFsdmUoKSB7DQogICAgICBpZiAodGhpcy5zZWxlY3RSb3cuY29kZSApIHsNCg0KICAgICAgICBvcGVuVmFsdmVCeUNvZGUoeyBjb2RlOiB0aGlzLnNlbGVjdFJvdy5jb2RlIH0pLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgIHRoaXMuJG5vdGlmeSh7DQogICAgICAgICAgICB0aXRsZTogIuaTjeS9nOe7k+aenCIsDQogICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5tZXNzYWdlLA0KICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLA0KICAgICAgICAgICAgZHVyYXRpb246IDIwMDANCiAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfSwNCiAgICBjbG9zZVZhbHZlKCkgew0KICAgICAgaWYgKHRoaXMuc2VsZWN0Um93LmNvZGUpIHsNCiAgICAgICAgY2xvc2VWYWx2ZUJ5Q29kZSh7IGNvZGU6IHRoaXMuc2VsZWN0Um93LmNvZGUgfSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgdGhpcy4kbm90aWZ5KHsNCiAgICAgICAgICAgIHRpdGxlOiAi5pON5L2c57uT5p6cIiwNCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLm1lc3NhZ2UsDQogICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsDQogICAgICAgICAgICBkdXJhdGlvbjogMjAwMA0KICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["chargeManager.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgOA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"chargeManager.vue","sourceRoot":"src/views/business/charge","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <div class=\"filter-container\">\r\n      <div class=\"demo-input-suffix\">\r\n        <el-input\r\n          v-model=\"listQuery.userName\"\r\n          placeholder=\"请输入户名\"\r\n          style=\"width: 200px;\"\r\n          class=\"filter-item\"\r\n          @keyup.enter.native=\"handleFilter\"\r\n        ></el-input>\r\n        <el-input\r\n          v-model=\"listQuery.phone\"\r\n          placeholder=\"请输入电话\"\r\n          style=\"width: 200px;margin-left: 10px;\"\r\n          class=\"filter-item\"\r\n        ></el-input>\r\n        <el-input\r\n          v-model=\"listQuery.idcard\"\r\n          placeholder=\"请输入证件号码\"\r\n          style=\"width: 200px;margin-left: 10px;\"\r\n          class=\"filter-item\"\r\n        />\r\n        <br />\r\n        <el-select\r\n          v-model=\"listQuery.area1\"\r\n          placeholder=\"请输入镇名\"\r\n          style=\"width: 200px;\"\r\n          class=\"filter-item\"\r\n          filterable\r\n          @change=\"updateAllArea($event,1)\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in areaList[0]\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.name\"\r\n          />\r\n        </el-select>\r\n        <el-select\r\n          v-model=\"listQuery.area2\"\r\n          placeholder=\"请输入村名\"\r\n          style=\"width: 200px;margin-left: 10px;\"\r\n          class=\"filter-item\"\r\n          filterable\r\n          @change=\"updateAllArea($event,2)\"\r\n        >\r\n          <el-option\r\n            v-for=\"item1 in areaList[1]\"\r\n            :key=\"item1.id\"\r\n            :label=\"item1.name\"\r\n            :value=\"item1.name\"\r\n          />\r\n        </el-select>\r\n        <el-select\r\n          v-model=\"listQuery.area3\"\r\n          placeholder=\"请输入组名\"\r\n          style=\"width: 200px;margin-left: 10px;\"\r\n          class=\"filter-item\"\r\n          filterable\r\n          @change=\"setArea3($event)\"\r\n        >\r\n          <el-option\r\n            v-for=\"item2 in areaList[2]\"\r\n            :key=\"item2.id\"\r\n            :label=\"item2.name\"\r\n            :value=\"item2.name\"\r\n          />\r\n        </el-select>\r\n        <div class=\"btn-group\">\r\n          <el-button\r\n            v-waves\r\n            class=\"filter-item\"\r\n            type=\"primary\"\r\n            icon=\"el-icon-search\"\r\n            @click=\"handleFilter\"\r\n            style=\"margin-left: 10px;\"\r\n          >查询</el-button>\r\n          <el-button\r\n            class=\"filter-item\"\r\n            style=\"margin-left: 10px;\"\r\n            type=\"success\"\r\n            icon=\"el-icon-money\"\r\n            @click=\"showChargeDialog\"\r\n          >充值</el-button>\r\n          <el-button\r\n            v-waves\r\n            :loading=\"downloadLoading\"\r\n            style=\"margin-left: 10px;\"\r\n            class=\"filter-item\"\r\n            type=\"primary\"\r\n            icon=\"el-icon-check\"\r\n            @click=\"openValve\"\r\n          >开阀</el-button>\r\n          <el-button\r\n            v-waves\r\n            :loading=\"downloadLoading\"\r\n            style=\"margin-left: 10px;\"\r\n            class=\"filter-item\"\r\n            type=\"primary\"\r\n            icon=\"el-icon-close\"\r\n            @click=\"closeValve\"\r\n          >关阀</el-button>\r\n          <el-button\r\n            v-waves\r\n            :loading=\"downloadLoading\"\r\n            style=\"margin-left: 10px;\"\r\n            class=\"filter-item\"\r\n            type=\"warning\"\r\n            icon=\"el-icon-s-order\"\r\n            @click=\"showChargeLogDialog\"\r\n          >充值记录</el-button>\r\n          <el-button\r\n            v-waves\r\n            style=\"margin-left: 10px;\"\r\n            class=\"filter-item\"\r\n            type=\"warning\"\r\n            icon=\"el-icon-s-operation\"\r\n            @click=\"showBillDialog\"\r\n          >账单记录</el-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <el-table\r\n      :key=\"tableKey\"\r\n      v-loading=\"listLoading\"\r\n      :data=\"list\"\r\n      @row-click=\"rowClick\"\r\n      border\r\n      fit\r\n      highlight-current-row\r\n      style=\"width: 100%;\"\r\n    >\r\n      <el-table-column\r\n        label=\"序号\"\r\n        prop=\"id\"\r\n        sortable=\"custom\"\r\n        align=\"center\"\r\n        width=\"80\"\r\n      >\r\n        <template slot-scope=\"{row}\">\r\n          <span> {{ row.id }} </span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"户名\"  align=\"center\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.userName }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"余额\"  align=\"center\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.balance }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"最近缴费时间\"  align=\"center\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.lastbuytime }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"最近缴费金额\"  align=\"center\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.lastbuyamount }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"阀门\"  align=\"center\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ findDescByValue('meterModel','valvestate',row.valvestate) }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"电话\" width=\"110px\" align=\"center\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.phone }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"表号\" width=\"150px\" align=\"center\" :show-overflow-tooltip=\"true\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.code }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"地址\" min-width=\"150px\" :show-overflow-tooltip=\"true\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.area1 }} - {{row.area2 }} - {{ row.area3 }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"身份证号\" width=\"110px\" align=\"center\" :show-overflow-tooltip=\"true\">\r\n        <template slot-scope=\"{row}\">\r\n          <span>{{ row.idcard }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"操作\"\r\n        align=\"center\"\r\n        class-name=\"small-padding fixed-width\"\r\n        fixed=\"right\"\r\n      >\r\n        <template slot-scope=\"{row}\">\r\n          <el-button type=\"primary\" size=\"mini\" @click=\"handleUpdate(row)\">编辑</el-button>\r\n          <!--           <el-button   type=\"danger\" size=\"mini\"  @click=\"handleDelete(row,$index)\">\r\n                      删除\r\n          </el-button>-->\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <pagination\r\n      v-show=\"total>0\"\r\n      :total=\"total\"\r\n      :page.sync=\"listQuery.page\"\r\n      :limit.sync=\"listQuery.rows\"\r\n      @pagination=\"getList\"\r\n    />\r\n    <billDialog ref=\"billDialog\" :userid=\"selectRow.userid\" :userName=\"selectRow.userName\" :meterCode=\"selectRow.code\">\r\n    </billDialog>\r\n    <chargeLogDialog ref=\"chargeLogDialog\" :userid=\"selectRow.userid\" :userName=\"selectRow.userName\" :meterCode=\"selectRow.code\">\r\n    </chargeLogDialog>\r\n    <chargeDialog ref=\"chargeDialog\" :userid=\"selectRow.userid\" :userName=\"selectRow.userName\" :meterCode=\"selectRow.code\" :balance=\"selectRow.balance\" >\r\n    </chargeDialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nimport { queryAddressList } from \"@/api/addressManager\";\r\n  import { queryMeterAndUserList, openValveByCode, closeValveByCode } from \"@/api/meterManager\";\r\nimport { initAllDictionary, getDescByBeanAttrValue } from \"@/api/dictionaryManager\";\r\nimport waves from \"@/directive/waves\"; // waves directive\r\nimport { parseTime } from \"@/utils\";\r\nimport Pagination from \"@/components/Pagination\"; // secondary package based on el-pagination\r\n\r\nimport billDialog from \"./billDialog\";\r\nimport chargeLogDialog from \"./chargeLogDialog\";\r\nimport chargeDialog from \"./chargeDialog\";\r\n\r\n\r\n\r\nexport default {\r\n  name: \"chargeTable\",\r\n  components: { Pagination ,billDialog, chargeLogDialog ,chargeDialog },\r\n  directives: { waves },\r\n  filters: {\r\n  },\r\n  data() {\r\n    return {\r\n      findDescByValue : getDescByBeanAttrValue,\r\n      tableKey: 0,\r\n      list: null,\r\n      total: 0,\r\n      radioMeter: undefined ,\r\n      listLoading: true,\r\n      listQuery: {\r\n        page: 1,\r\n        rows: 20,\r\n        importance: undefined,\r\n        title: undefined,\r\n        type: undefined,\r\n        sort: \"+id\"\r\n      },\r\n      selectRow:{},\r\n      areaList: [],\r\n      showReviewer: false,\r\n      downloadLoading: false\r\n    };\r\n  },\r\n\r\n  created() {\r\n    initAllDictionary();\r\n    this.getList();\r\n    this.updateAddressList(1, null);\r\n\r\n  },\r\n  methods: {\r\n    getList() {\r\n      this.listLoading = true;\r\n      queryMeterAndUserList(this.listQuery).then(response => {\r\n        this.list = response.data;\r\n        this.total = response.total;\r\n\r\n        // Just to simulate the time of the request\r\n        setTimeout(() => {\r\n          this.listLoading = false;\r\n        }, 0.5 * 1000);\r\n      });\r\n    },\r\n    updateAddressList(level, parentId) {\r\n      if (!level) {\r\n        level = 1;\r\n      }\r\n      queryAddressList({ level: level, parentId: parentId }).then(response => {\r\n        this.areaList[level - 1] = response.data;\r\n        this.$forceUpdate();\r\n      });\r\n    },\r\n    updateAllArea(val, level) {\r\n      if (level == 1) {\r\n        this.areaList[1] = {};\r\n        this.areaList[2] = {};\r\n        this.listQuery.area2 = \"\";\r\n        this.listQuery.area3 = \"\";\r\n      } else if (level == 2) {\r\n        this.areaList[2] = {};\r\n        this.listQuery.area3 = \"\";\r\n      }\r\n      var obj = this.areaList[level - 1].find(o => o.name === val);\r\n\r\n      this.updateAddressList(level + 1, obj.id);\r\n    },\r\n    setArea3(val) {\r\n      this.listQuery.area3 = val;\r\n      this.$forceUpdate();\r\n    },\r\n    handleFilter() {\r\n      this.listQuery.page = 1;\r\n      this.getList();\r\n    },\r\n    rowClick(\trow, column, event){\r\n      this.selectRow = row;\r\n    },\r\n    showBillDialog() {\r\n      if(this.$refs.billDialog.userid){\r\n        this.$refs.billDialog.userName = this.selectRow.userName +'的月账单';\r\n        this.$refs.billDialog.dialogTableVisible = true;\r\n      }else{\r\n        this.$notify({\r\n          title: \"请先选择用户\",\r\n          message: \"请先选择用户，再查询账单\",\r\n          type: \"error\",\r\n          duration: 2000\r\n        });\r\n      }\r\n    },\r\n    showChargeLogDialog() {\r\n      if(this.$refs.chargeLogDialog.userid){\r\n        this.$refs.chargeLogDialog.userName = this.selectRow.userName +'的充值记录';\r\n        this.$refs.chargeLogDialog.dialogTableVisible = true;\r\n      }else{\r\n        this.$notify({\r\n          title: \"请先选择用户\",\r\n          message: \"请先选择用户，再查询充值记录\",\r\n          type: \"error\",\r\n          duration: 2000\r\n        });\r\n      }\r\n    },\r\n    showChargeDialog() {\r\n      if (this.$refs.chargeDialog.userid) {\r\n        this.$refs.chargeDialog.userName = this.selectRow.userName;\r\n        this.$refs.chargeDialog.meterCode = this.selectRow.code;\r\n        this.$refs.chargeDialog.balance = this.selectRow.balance;\r\n\r\n        this.$refs.chargeDialog.dialogTableVisible = true;\r\n      } else {\r\n        this.$notify({\r\n          title: \"请先选择用户\",\r\n          message: \"请先选择用户，再点击充值\",\r\n          type: \"error\",\r\n          duration: 2000\r\n        });\r\n      }\r\n    },\r\n    openValve() {\r\n      if (this.selectRow.code ) {\r\n\r\n        openValveByCode({ code: this.selectRow.code }).then(response => {\r\n          this.$notify({\r\n            title: \"操作结果\",\r\n            message: response.message,\r\n            type: \"success\",\r\n            duration: 2000\r\n          });\r\n        });\r\n      }\r\n    },\r\n    closeValve() {\r\n      if (this.selectRow.code) {\r\n        closeValveByCode({ code: this.selectRow.code }).then(response => {\r\n          this.$notify({\r\n            title: \"操作结果\",\r\n            message: response.message,\r\n            type: \"success\",\r\n            duration: 2000\r\n          });\r\n        });\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n"]}]}