{"remainingRequest":"G:\\vs_workspace\\git_sxq\\lmnb-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\vs_workspace\\git_sxq\\lmnb-web\\src\\views\\business\\address\\addressManager.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\vs_workspace\\git_sxq\\lmnb-web\\src\\views\\business\\address\\addressManager.vue","mtime":1697505240636},{"path":"G:\\vs_workspace\\git_sxq\\lmnb-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686317881343},{"path":"G:\\vs_workspace\\git_sxq\\lmnb-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1686317882159},{"path":"G:\\vs_workspace\\git_sxq\\lmnb-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686317881343},{"path":"G:\\vs_workspace\\git_sxq\\lmnb-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1686317877157}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBxdWVyeUFkZHJlc3NMaXN0LCBhZGRBZGRyZXNzLCB1cGRhdGVBZGRyZXNzLCBkZWxldGVBZGRyZXNzIH0gZnJvbSAnQC9hcGkvYWRkcmVzc01hbmFnZXInDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCgkJICBoZWFkZXJMYWJlbDogJ+a3u+WKoOWcsOWdgCcsDQoJCSAgYnV0dG9uVHlwZTogJ3ByaW1hcnknLA0KCQkgIGFkZHJlc3NMaXN0OiB7fSwNCgkJICBhZGRyZXNzOiB7IHBhcmVudE5hbWU6ICcnLCBwYXJlbnRJZDogdW5kZWZpbmVkLCBuYW1lOiAnJywgbGV2ZWw6IHVuZGVmaW5lZCwgaWQ6IHVuZGVmaW5lZCB9LA0KICAgICAgcHJvcHM6IHsNCiAgICAgICAgbGFiZWw6ICduYW1lJywNCiAgICAgICAgY2hpbGRyZW46ICd6b25lcycNCiAgICAgIH0sDQogICAgICBydWxlczogew0KICAgICAgICBuYW1lOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+Whq+WGmeWcsOWdgOWQjeensCcsIHRyaWdnZXI6ICdjaGFuZ2UnIH1dDQogICAgICB9DQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIC8vIHRoaXMuaW5pdEFkZHJlc3NMaXN0KCk7DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBoYW5kbGVDaGVja0NoYW5nZShkYXRhLCBjaGVja2VkLCBpbmRldGVybWluYXRlKSB7DQogICAgICBjb25zb2xlLmxvZyhkYXRhLCBjaGVja2VkLCBpbmRldGVybWluYXRlKQ0KICAgIH0sDQogICAgaGFuZGxlTm9kZUNsaWNrKGRhdGEsIG5vZGUpIHsNCgkJICB0aGlzLmhlYWRlckxhYmVsID0gJ+S/ruaUueWcsOWdgCcNCgkJICB0aGlzLmJ1dHRvblR5cGUgPSAnc3VjY2VzcycNCiAgICAgIHRoaXMuYWRkcmVzcy5uYW1lID0gZGF0YS5uYW1lDQogICAgICB0aGlzLmFkZHJlc3MubGV2ZWwgPSBkYXRhLmxldmVsDQogICAgICB0aGlzLmFkZHJlc3MuaWQgPSBkYXRhLmlkDQogICAgICB0aGlzLmFkZHJlc3MucGFyZW50SWQgPSBkYXRhLnBhcmVudElkDQogICAgICB2YXIgcGFyZW50RGF0YSA9IG5vZGUucGFyZW50LmRhdGENCiAgICAgIGlmIChwYXJlbnREYXRhKSB7DQogICAgICAgIHRoaXMuYWRkcmVzcy5wYXJlbnROYW1lID0gcGFyZW50RGF0YS5uYW1lDQogICAgICB9DQoJICB9LA0KCSAgaGFuZGxlQWRkTmV4dChkYXRhLCBub2RlKSB7DQoJCSAgdGhpcy5oZWFkZXJMYWJlbCA9ICfmt7vliqDlnLDlnYAnDQoJCSAgdGhpcy5idXR0b25UeXBlID0gJ3ByaW1hcnknDQogICAgICB0aGlzLmFkZHJlc3MubmFtZSA9ICcnDQogICAgICB0aGlzLmFkZHJlc3MubGV2ZWwgPSBkYXRhLmxldmVsICsgMQ0KICAgICAgdGhpcy5hZGRyZXNzLmlkID0gdW5kZWZpbmVkDQogICAgICB0aGlzLmFkZHJlc3MucGFyZW50SWQgPSBkYXRhLmlkDQogICAgICB0aGlzLmFkZHJlc3MucGFyZW50TmFtZSA9IGRhdGEubmFtZQ0KCSAgfSwNCgkgIHN1Ym1pdEFkZHJlc3MoKSB7DQogICAgICB0aGlzLiRyZWZzWydkYXRhRm9ybSddLnZhbGlkYXRlKCh2YWxpZCkgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICB2YXIgY3VyTm9kZSA9IHRoaXMuJHJlZnMudHJlZS5nZXRDdXJyZW50Tm9kZSgpDQogICAgICAgICAgaWYgKHRoaXMuYWRkcmVzcy5pZCkgew0KICAgICAgICAgICAgdXBkYXRlQWRkcmVzcyh0aGlzLmFkZHJlc3MpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICBjdXJOb2RlLmRhdGEgPSB0aGlzLmFkZHJlc3MNCiAgICAgICAgICAgICAgY3VyTm9kZS5uYW1lID0gdGhpcy5hZGRyZXNzLm5hbWUNCiAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5KHsNCiAgICAgICAgICAgICAgICB0aXRsZTogJ+aIkOWKnycsDQogICAgICAgICAgICAgICAgbWVzc2FnZTogJ+abtOaWsOaIkOWKnycsDQogICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLA0KICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwDQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBhZGRBZGRyZXNzKHRoaXMuYWRkcmVzcykudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgIHRoaXMuYWRkcmVzcy5pZCA9IHJlc3BvbnNlLmRhdGEuaWQNCg0KICAgICAgICAgICAgICB0aGlzLiRub3RpZnkoew0KICAgICAgICAgICAgICAgIHRpdGxlOiAn5oiQ5YqfJywNCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5re75Yqg5oiQ5YqfJywNCiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICAgICAgZHVyYXRpb246IDIwMDANCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgaWYgKHRoaXMuYWRkcmVzcy5sZXZlbCkgew0KICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMudHJlZS5hcHBlbmQoT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5hZGRyZXNzKSwgY3VyTm9kZSkNCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSkNCgkgIH0sDQoJICBkZWxldGVBZGRyZXNzKCkgew0KCQkgIGlmICh0aGlzLmFkZHJlc3MuaWQpIHsNCiAgICAgICAgZGVsZXRlQWRkcmVzcyh7IGlkOiB0aGlzLmFkZHJlc3MuaWQgfSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgdmFyIGN1ck5vZGUgPSB0aGlzLiRyZWZzLnRyZWUuZ2V0Q3VycmVudE5vZGUoKQ0KICAgICAgICAgIHRoaXMuJHJlZnMudHJlZS5yZW1vdmUoY3VyTm9kZSkNCiAgICAgICAgICB0aGlzLiRub3RpZnkoew0KICAgICAgICAgICAgdGl0bGU6ICfmiJDlip8nLA0KICAgICAgICAgICAgbWVzc2FnZTogJ+WIoOmZpOaIkOWKnycsDQogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICBkdXJhdGlvbjogMjAwMA0KICAgICAgICAgIH0pDQogICAgICAgIH0pDQoJCSAgfSBlbHNlIHsNCgkJCSAgdGhpcy4kbm90aWZ5KHsNCiAgICAgICAgICB0aXRsZTogJ+Wksei0pScsDQogICAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqeWcsOWdgOWQjuWGjeeCueWHu+WIoOmZpO+8gScsDQogICAgICAgICAgdHlwZTogJ2Vycm9yJywNCiAgICAgICAgICBkdXJhdGlvbjogMjAwMA0KICAgICAgICB9KQ0KCQkgIH0NCgkgIH0sDQoJICByZW5kZXJOZXh0QnV0dG9uKGgsIHsgbm9kZSwgZGF0YSwgc3RvcmUgfSkgew0KICAgICAgcmV0dXJuICgNCiAgICAgICAgPHNwYW4gY2xhc3M9J2N1c3RvbS10cmVlLW5vZGUnPg0KICAgICAgICAgIDxzcGFuIG9uLWNsaWNrPXsgKCkgPT4gdGhpcy5oYW5kbGVOb2RlQ2xpY2soZGF0YSwgbm9kZSkgfT57bm9kZS5sYWJlbH08L3NwYW4+DQogICAgICAgICAgPHNwYW4+DQogICAgICAgICAgICA8ZWwtYnV0dG9uIHNpemU9J21pbmknIHR5cGU9J3RleHQnIHN0eWxlPSdtYXJnaW4tbGVmdDoxMHB4Oycgb24tY2xpY2s9eyAoKSA9PiB0aGlzLmhhbmRsZUFkZE5leHQoZGF0YSwgbm9kZSkgfT7mt7vliqDkuIvnuqc8L2VsLWJ1dHRvbj4NCiAgICAgICAgICA8L3NwYW4+DQogICAgICAgIDwvc3Bhbj4pDQogICAgfSwNCiAgICBsb2FkTm9kZShub2RlLCByZXNvbHZlKSB7DQogICAgICAvLyAgICBjb25zb2xlLmxvZyhub2RlKTsNCiAgICAgIC8vICAgY29uc29sZS5sb2cocmVzb2x2ZSk7DQogICAgICBxdWVyeUFkZHJlc3NMaXN0KHsgbGV2ZWw6IG5vZGUubGV2ZWwgKyAxLCBwYXJlbnRJZDogbm9kZS5rZXkgfSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIHJlc29sdmUocmVzcG9uc2UuZGF0YSkNCiAgICAgIH0pCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["addressManager.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addressManager.vue","sourceRoot":"src/views/business/address","sourcesContent":["<template>\r\n  <el-container style=\"border: 1px solid #eee;margin-left:10px;margin-right:10px;\">\r\n    <el-card class=\"box-card\">\r\n      <div slot=\"header\" class=\"clearfix\">\r\n        <span>地址列表</span>\r\n      </div>\r\n      <div class=\"tab-container\">\r\n        <el-tree\r\n          ref=\"tree\"\r\n          node-key=\"id\"\r\n          :props=\"props\"\r\n          :load=\"loadNode\"\r\n          lazy\r\n\r\n          highlight-current\r\n\r\n          :render-content=\"renderNextButton\"\r\n          @check-change=\"handleCheckChange\"\n        />\r\n      </div>\r\n    </el-card>\r\n    <el-container style=\"margin-left:10px;margin-right:10px;\">\r\n      <el-card class=\"box-card\" style=\"width:90%\">\r\n        <div slot=\"header\" class=\"clearfix\">\r\n          <span>{{ headerLabel }}</span>\r\n        </div>\r\n        <div class=\"tab-container\">\r\n          <el-form ref=\"dataForm\" :rules=\"rules\" :model=\"address\" label-position=\"left\" style=\"\">\r\n            <el-form-item label=\"上级地址\" prop=\"parentName\">\r\n              <el-input v-model=\"address.parentName\" placeholder=\"\" disabled />\r\n            </el-form-item>\r\n            <el-form-item label=\"地址名称\" prop=\"name\">\r\n              <el-input v-model=\"address.name\" placeholder=\"请输入地址名称\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"地址级别\" prop=\"level\">\r\n              <el-input v-model=\"address.level\" placeholder=\"最上级\" disabled />\r\n            </el-form-item>\r\n\r\n            <el-button ref=\"submitBTN\" :type=\"buttonType\" @click=\"submitAddress\">{{ headerLabel }}</el-button>\r\n            <el-button ref=\"deleteBTN\" type=\"danger\" @click=\"deleteAddress\">删除地址</el-button>\r\n          </el-form>\r\n        </div>\r\n      </el-card>\r\n    </el-container>\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\nimport { queryAddressList, addAddress, updateAddress, deleteAddress } from '@/api/addressManager'\r\nexport default {\r\n  data() {\r\n    return {\r\n\t\t  headerLabel: '添加地址',\r\n\t\t  buttonType: 'primary',\r\n\t\t  addressList: {},\r\n\t\t  address: { parentName: '', parentId: undefined, name: '', level: undefined, id: undefined },\r\n      props: {\r\n        label: 'name',\r\n        children: 'zones'\r\n      },\r\n      rules: {\r\n        name: [{ required: true, message: '请填写地址名称', trigger: 'change' }]\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    // this.initAddressList();\r\n  },\r\n  methods: {\r\n    handleCheckChange(data, checked, indeterminate) {\r\n      console.log(data, checked, indeterminate)\r\n    },\r\n    handleNodeClick(data, node) {\r\n\t\t  this.headerLabel = '修改地址'\r\n\t\t  this.buttonType = 'success'\r\n      this.address.name = data.name\r\n      this.address.level = data.level\r\n      this.address.id = data.id\r\n      this.address.parentId = data.parentId\r\n      var parentData = node.parent.data\r\n      if (parentData) {\r\n        this.address.parentName = parentData.name\r\n      }\r\n\t  },\r\n\t  handleAddNext(data, node) {\r\n\t\t  this.headerLabel = '添加地址'\r\n\t\t  this.buttonType = 'primary'\r\n      this.address.name = ''\r\n      this.address.level = data.level + 1\r\n      this.address.id = undefined\r\n      this.address.parentId = data.id\r\n      this.address.parentName = data.name\r\n\t  },\r\n\t  submitAddress() {\r\n      this.$refs['dataForm'].validate((valid) => {\r\n        if (valid) {\r\n          var curNode = this.$refs.tree.getCurrentNode()\r\n          if (this.address.id) {\r\n            updateAddress(this.address).then(response => {\r\n              curNode.data = this.address\r\n              curNode.name = this.address.name\r\n              this.$notify({\r\n                title: '成功',\r\n                message: '更新成功',\r\n                type: 'success',\r\n                duration: 2000\r\n              })\r\n            })\r\n          } else {\r\n            addAddress(this.address).then(response => {\r\n              this.address.id = response.data.id\r\n\r\n              this.$notify({\r\n                title: '成功',\r\n                message: '添加成功',\r\n                type: 'success',\r\n                duration: 2000\r\n              })\r\n              if (this.address.level) {\r\n                this.$refs.tree.append(Object.assign({}, this.address), curNode)\r\n              } else {\r\n                location.reload()\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n\t  },\r\n\t  deleteAddress() {\r\n\t\t  if (this.address.id) {\r\n        deleteAddress({ id: this.address.id }).then(response => {\r\n          var curNode = this.$refs.tree.getCurrentNode()\r\n          this.$refs.tree.remove(curNode)\r\n          this.$notify({\r\n            title: '成功',\r\n            message: '删除成功',\r\n            type: 'success',\r\n            duration: 2000\r\n          })\r\n        })\r\n\t\t  } else {\r\n\t\t\t  this.$notify({\r\n          title: '失败',\r\n          message: '请选择地址后再点击删除！',\r\n          type: 'error',\r\n          duration: 2000\r\n        })\r\n\t\t  }\r\n\t  },\r\n\t  renderNextButton(h, { node, data, store }) {\r\n      return (\r\n        <span class='custom-tree-node'>\r\n          <span on-click={ () => this.handleNodeClick(data, node) }>{node.label}</span>\r\n          <span>\r\n            <el-button size='mini' type='text' style='margin-left:10px;' on-click={ () => this.handleAddNext(data, node) }>添加下级</el-button>\r\n          </span>\r\n        </span>)\r\n    },\r\n    loadNode(node, resolve) {\r\n      //    console.log(node);\r\n      //   console.log(resolve);\r\n      queryAddressList({ level: node.level + 1, parentId: node.key }).then(response => {\r\n        resolve(response.data)\r\n      })\n    }\r\n  }\r\n}\r\n</script>\n"]}]}