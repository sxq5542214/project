{"remainingRequest":"G:\\git\\project\\.git\\lm\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\git\\project\\.git\\lm\\src\\views\\business\\user\\meterTab\\meterTab.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\git\\project\\.git\\lm\\src\\views\\business\\user\\meterTab\\meterTab.vue","mtime":1688913445149},{"path":"G:\\git\\project\\.git\\lm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686317881343},{"path":"G:\\git\\project\\.git\\lm\\node_modules\\babel-loader\\lib\\index.js","mtime":1686317882159},{"path":"G:\\git\\project\\.git\\lm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686317881343},{"path":"G:\\git\\project\\.git\\lm\\node_modules\\vue-loader\\lib\\index.js","mtime":1686317877157}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBxdWVyeVByaWNlTGlzdCB9IGZyb20gIkAvYXBpL3ByaWNlTWFuYWdlciI7DQppbXBvcnQgeyBxdWVyeVN1cHBsaWVyTGlzdCB9IGZyb20gIkAvYXBpL3N1cHBsaWVyTWFuYWdlciI7DQppbXBvcnQgeyBxdWVyeVByb2R1Y3RMaXN0IH0gZnJvbSAiQC9hcGkvcHJvZHVjdE1hbmFnZXIiOw0KaW1wb3J0IHsgZmluZE1ldGVyQnlDb2RlIH0gZnJvbSAiQC9hcGkvbWV0ZXJNYW5hZ2VyIjsNCmltcG9ydCB7ICBxdWVyeU1ldGVyQ2FsaWJlckxpc3QsICBxdWVyeU1ldGVyT3BlbmVkTGlzdH0gZnJvbSAiQC9hcGkvZGljdGlvbmFyeU1hbmFnZXIiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGZpbHRlcnM6IHsNCiAgfSwNCiAgcHJvcHM6IHsNCiAgICB0eXBlOiB7IH0sDQogICAgY3VyTWV0ZXI6e30NCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgbGlzdDogbnVsbCwNCiAgICAgIHZhbGlkYXRlRmxhZzpmYWxzZSwNCiAgICAgIG1ldGVyOiB7IGJhc2VudW06IDAsY29kZTonJyxpbnN0YWxscG9zaXRpb246JycsZmFjdG9yeWNvZGU6JycscHJpY2Vjb2RlOicnLHByb2R1Y3RpZDonJyxjYWxpYmVyOicnLG9wZW5lZDonJyx1c2VyaWQ6JycsaWQ6dW5kZWZpbmVkIH0sDQogICAgICBwcmljZUxpc3Q6IHt9LA0KICAgICAgc3VwcGxpZXJMaXN0OiB7fSwNCiAgICAgIHByb2R1Y3RMaXN0OiB7fSwNCiAgICAgIGNhbGliZXJMaXN0OiB7fSwNCiAgICAgIG9wZW5lZExpc3Q6IHt9LA0KICAgICAgaXNEaXNhYmxlZCA6IGZhbHNlLA0KICAgICAgbGlzdFF1ZXJ5OiB7DQogICAgICAgIHBhZ2U6IDEsDQogICAgICAgIGxpbWl0OiA1LA0KICAgICAgICAvLyB0eXBlOiB0aGlzLnR5cGUsDQogICAgICAgIHNvcnQ6ICIraWQiDQogICAgICB9LA0KICAgICAgcnVsZXM6IHsNCiAgICAgICAgY29kZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaXooajlj7ciIH1dDQogICAgICB9LA0KICAgICAgbG9hZGluZzogZmFsc2UNCiAgICB9Ow0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuZ2V0TGlzdCgpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgdmFsaWRhdGVGb3JtKCl7DQogICAgICB0aGlzLiRyZWZzWyJkYXRhRm9ybSJdLnZhbGlkYXRlKHZhbGlkID0+IHsNCiAgICAgICAgdGhpcy52YWxpZGF0ZUZsYWcgPSB2YWxpZDsNCg0KICAgICAgfSk7DQogICAgfSwNCg0KICAgIGdldE1ldGVyKCl7DQogICAgICByZXR1cm4gdGhpcy5tZXRlcjsNCiAgICB9LA0KDQogICAgZ2V0TGlzdCgpIHsNCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7DQogICAgICB0aGlzLm1ldGVyLmNvZGUgPSB0aGlzLmN1ck1ldGVyLmNvZGU7DQogICAgICB0aGlzLm1ldGVyLmluc3RhbGxwb3NpdGlvbiA9ICB0aGlzLmN1ck1ldGVyLmluc3RhbGxwb3NpdGlvbjsNCiAgICAgIC8vIHRoaXMuJGVtaXQoImNyZWF0ZSIpOyAvLyBmb3IgdGVzdA0KDQogICAgICBxdWVyeVN1cHBsaWVyTGlzdCgpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLnN1cHBsaWVyTGlzdCA9IHJlc3BvbnNlLmRhdGE7DQogICAgICAgIHRoaXMubWV0ZXIuZmFjdG9yeWNvZGUgPSByZXNwb25zZS5kYXRhWzBdLmlkOw0KICAgICAgfSk7DQogICAgICBxdWVyeVByaWNlTGlzdCgpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLnByaWNlTGlzdCA9IHJlc3BvbnNlLmRhdGE7DQogICAgICAgIHRoaXMubWV0ZXIucHJpY2Vjb2RlID0gcmVzcG9uc2UuZGF0YVswXS5pZDsNCiAgICAgIH0pOw0KICAgICAgcXVlcnlQcm9kdWN0TGlzdCgpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLnByb2R1Y3RMaXN0ID0gcmVzcG9uc2UuZGF0YTsNCiAgICAgICAgdGhpcy5tZXRlci5wcm9kdWN0aWQgPSByZXNwb25zZS5kYXRhWzBdLmlkOw0KICAgICAgfSk7DQogICAgICBxdWVyeU1ldGVyQ2FsaWJlckxpc3QoKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgdGhpcy5jYWxpYmVyTGlzdCA9IHJlc3BvbnNlLmRhdGE7DQogICAgICAgIHRoaXMubWV0ZXIuY2FsaWJlciA9IHJlc3BvbnNlLmRhdGFbMF0udmFsdWU7DQogICAgICB9KTsNCiAgICAgIHF1ZXJ5TWV0ZXJPcGVuZWRMaXN0KCkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIHRoaXMub3BlbmVkTGlzdCA9IHJlc3BvbnNlLmRhdGE7DQogICAgICAgIHRoaXMubWV0ZXIub3BlbmVkID0gcmVzcG9uc2UuZGF0YVswXS52YWx1ZTsNCg0KICAgICAgfSk7DQogICAgICBpZih0aGlzLmN1ck1ldGVyLmNvZGUgIT0gJ+aWsOWinuawtOihqCcpew0KICAgICAgICAvLyDliqDovb3mlbDmja4NCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgdGhpcy5tZXRlci5iYXNlbnVtID0gIHRoaXMuY3VyTWV0ZXIuYmFzZW51bTsNCiAgICAgICAgICB0aGlzLm1ldGVyLmZhY3Rvcnljb2RlID0gIE51bWJlcih0aGlzLmN1ck1ldGVyLmZhY3Rvcnljb2RlKTsNCiAgICAgICAgICB0aGlzLm1ldGVyLnByaWNlY29kZSA9ICB0aGlzLmN1ck1ldGVyLnByaWNlY29kZTsNCiAgICAgICAgICB0aGlzLm1ldGVyLnByb2R1Y3RpZCA9ICB0aGlzLmN1ck1ldGVyLnByb2R1Y3RpZDsNCiAgICAgICAgICB0aGlzLm1ldGVyLmNhbGliZXIgPSAgdGhpcy5jdXJNZXRlci5jYWxpYmVyOw0KICAgICAgICAgIHRoaXMubWV0ZXIub3BlbmVkID0gIHRoaXMuY3VyTWV0ZXIub3BlbmVkKycnOw0KICAgICAgICAgIHRoaXMubWV0ZXIudXNlcmlkID0gIHRoaXMuY3VyTWV0ZXIudXNlcmlkOw0KICAgICAgICAgIHRoaXMubWV0ZXIuaWQgPSAgdGhpcy5jdXJNZXRlci5pZDsNCiAgICAgICAgICB0aGlzLmlzRGlzYWJsZWQgPSB0cnVlOw0KDQogICAgICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKTsNCiAgICAgICAgfSwgMC41ICogMTAwMCk7DQogICAgICB9ZWxzZXsNCiAgICAgICAgdGhpcy5tZXRlci5jb2RlID0gJyc7DQogICAgICB9DQogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgIA0KICAgIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["meterTab.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"meterTab.vue","sourceRoot":"src/views/business/user/meterTab","sourcesContent":["<template>\r\n  <el-form\r\n    ref=\"dataForm\"\r\n    :rules=\"rules\"\r\n    :model=\"meter\"\r\n    :inline=\"true\"\r\n    label-position=\"left\"\r\n    label-width=\"auto\"\r\n    style=\" \"\r\n  >\r\n    <el-form-item label=\"表号\" prop=\"code\">\r\n      <el-input v-model=\"meter.code\" placeholder=\"请输入表号\" />\r\n    </el-form-item>\r\n    <el-form-item label=\"表地址\" prop=\"installposition\">\r\n      <el-input v-model=\"meter.installposition\" placeholder=\"请输入表安装地址\" />\r\n    </el-form-item>\r\n    <el-form-item label=\"表底数\" prop=\"basenum\">\r\n      <el-input v-model=\"meter.basenum\" placeholder=\"请输入用户名称\"  :disabled=isDisabled  />\r\n    </el-form-item>\r\n    <el-form-item label=\"价格类型\" prop=\"pricecode\">\r\n      <el-select v-model=\"meter.pricecode\" placeholder=\"请选择\" class=\"filter-item\" filterable>\r\n        <el-option v-for=\"item in priceList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\" />\r\n      </el-select>\r\n    </el-form-item>\r\n    <el-form-item label=\"厂商\" prop=\"factorycode\">\r\n      <el-select v-model=\"meter.factorycode\" placeholder=\"请选择\" class=\"filter-item\" filterable>\r\n        <el-option v-for=\"item in supplierList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\" />\r\n      </el-select>\r\n    </el-form-item>\r\n    <el-form-item label=\"产品类型\" prop=\"productid\">\r\n      <el-select v-model=\"meter.productid\" placeholder=\"请选择\" class=\"filter-item\" filterable>\r\n        <el-option v-for=\"item in productList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\" />\r\n      </el-select>\r\n    </el-form-item>\r\n    <el-form-item label=\"口径\" prop=\"caliber\">\r\n      <el-select v-model=\"meter.caliber\" placeholder=\"请选择\" class=\"filter-item\" filterable>\r\n        <el-option\r\n          v-for=\"item in caliberList\"\r\n          :key=\"item.value\"\r\n          :label=\"item.description\"\r\n          :value=\"item.value\"\r\n        />\r\n      </el-select>\r\n    </el-form-item>\r\n    <el-form-item label=\"账户状态\" prop=\"opened\">\r\n      <el-select v-model=\"meter.opened\" placeholder=\"请选择\" class=\"filter-item\" filterable>\r\n        <el-option\r\n          v-for=\"item in openedList\"\r\n          :key=\"item.value\"\r\n          :label=\"item.description\"\r\n          :value=\"item.value\"\r\n        />\r\n      </el-select>\r\n    </el-form-item>\r\n  </el-form>\r\n</template>\r\n\r\n<script>\r\nimport { queryPriceList } from \"@/api/priceManager\";\r\nimport { querySupplierList } from \"@/api/supplierManager\";\r\nimport { queryProductList } from \"@/api/productManager\";\r\nimport { findMeterByCode } from \"@/api/meterManager\";\r\nimport {  queryMeterCaliberList,  queryMeterOpenedList} from \"@/api/dictionaryManager\";\r\n\r\nexport default {\r\n  filters: {\r\n  },\r\n  props: {\r\n    type: { },\r\n    curMeter:{}\r\n  },\r\n  data() {\r\n    return {\r\n      list: null,\r\n      validateFlag:false,\r\n      meter: { basenum: 0,code:'',installposition:'',factorycode:'',pricecode:'',productid:'',caliber:'',opened:'',userid:'',id:undefined },\r\n      priceList: {},\r\n      supplierList: {},\r\n      productList: {},\r\n      caliberList: {},\r\n      openedList: {},\r\n      isDisabled : false,\r\n      listQuery: {\r\n        page: 1,\r\n        limit: 5,\r\n        // type: this.type,\r\n        sort: \"+id\"\r\n      },\r\n      rules: {\r\n        code: [{ required: true, message: \"请输入表号\" }]\r\n      },\r\n      loading: false\r\n    };\r\n  },\r\n  created() {\r\n    this.getList();\r\n  },\r\n  methods: {\r\n    validateForm(){\r\n      this.$refs[\"dataForm\"].validate(valid => {\r\n        this.validateFlag = valid;\r\n\r\n      });\r\n    },\r\n\r\n    getMeter(){\r\n      return this.meter;\r\n    },\r\n\r\n    getList() {\r\n      this.loading = true;\r\n      this.meter.code = this.curMeter.code;\r\n      this.meter.installposition =  this.curMeter.installposition;\r\n      // this.$emit(\"create\"); // for test\r\n\r\n      querySupplierList().then(response => {\r\n        this.supplierList = response.data;\r\n        this.meter.factorycode = response.data[0].id;\r\n      });\r\n      queryPriceList().then(response => {\r\n        this.priceList = response.data;\r\n        this.meter.pricecode = response.data[0].id;\r\n      });\r\n      queryProductList().then(response => {\r\n        this.productList = response.data;\r\n        this.meter.productid = response.data[0].id;\r\n      });\r\n      queryMeterCaliberList().then(response => {\r\n        this.caliberList = response.data;\r\n        this.meter.caliber = response.data[0].value;\r\n      });\r\n      queryMeterOpenedList().then(response => {\r\n        this.openedList = response.data;\r\n        this.meter.opened = response.data[0].value;\r\n\r\n      });\r\n      if(this.curMeter.code != '新增水表'){\r\n        // 加载数据\r\n        setTimeout(() => {\r\n          this.meter.basenum =  this.curMeter.basenum;\r\n          this.meter.factorycode =  Number(this.curMeter.factorycode);\r\n          this.meter.pricecode =  this.curMeter.pricecode;\r\n          this.meter.productid =  this.curMeter.productid;\r\n          this.meter.caliber =  this.curMeter.caliber;\r\n          this.meter.opened =  this.curMeter.opened+'';\r\n          this.meter.userid =  this.curMeter.userid;\r\n          this.meter.id =  this.curMeter.id;\r\n          this.isDisabled = true;\r\n\r\n          this.$forceUpdate();\r\n        }, 0.5 * 1000);\r\n      }else{\r\n        this.meter.code = '';\r\n      }\r\n      this.loading = false;\r\n      \r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n"]}]}