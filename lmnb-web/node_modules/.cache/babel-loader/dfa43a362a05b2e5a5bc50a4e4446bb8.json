{"remainingRequest":"H:\\workspaces\\vueProject\\lm\\node_modules\\babel-loader\\lib\\index.js!H:\\workspaces\\vueProject\\lm\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!H:\\workspaces\\vueProject\\lm\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!H:\\workspaces\\vueProject\\lm\\src\\views\\business\\user\\meterTab\\meterTab.vue?vue&type=script&lang=js&","dependencies":[{"path":"H:\\workspaces\\vueProject\\lm\\src\\views\\business\\user\\meterTab\\meterTab.vue","mtime":1688913445149},{"path":"H:\\workspaces\\vueProject\\lm\\babel.config.js","mtime":1686317623477},{"path":"H:\\workspaces\\vueProject\\lm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686317881343},{"path":"H:\\workspaces\\vueProject\\lm\\node_modules\\babel-loader\\lib\\index.js","mtime":1686317882159},{"path":"H:\\workspaces\\vueProject\\lm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686317881343},{"path":"H:\\workspaces\\vueProject\\lm\\node_modules\\vue-loader\\lib\\index.js","mtime":1686317877157}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHF1ZXJ5UHJpY2VMaXN0IH0gZnJvbSAiQC9hcGkvcHJpY2VNYW5hZ2VyIjsKaW1wb3J0IHsgcXVlcnlTdXBwbGllckxpc3QgfSBmcm9tICJAL2FwaS9zdXBwbGllck1hbmFnZXIiOwppbXBvcnQgeyBxdWVyeVByb2R1Y3RMaXN0IH0gZnJvbSAiQC9hcGkvcHJvZHVjdE1hbmFnZXIiOwppbXBvcnQgeyBmaW5kTWV0ZXJCeUNvZGUgfSBmcm9tICJAL2FwaS9tZXRlck1hbmFnZXIiOwppbXBvcnQgeyBxdWVyeU1ldGVyQ2FsaWJlckxpc3QsIHF1ZXJ5TWV0ZXJPcGVuZWRMaXN0IH0gZnJvbSAiQC9hcGkvZGljdGlvbmFyeU1hbmFnZXIiOwpleHBvcnQgZGVmYXVsdCB7CiAgZmlsdGVyczoge30sCiAgcHJvcHM6IHsKICAgIHR5cGU6IHt9LAogICAgY3VyTWV0ZXI6IHt9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdDogbnVsbCwKICAgICAgdmFsaWRhdGVGbGFnOiBmYWxzZSwKICAgICAgbWV0ZXI6IHsKICAgICAgICBiYXNlbnVtOiAwLAogICAgICAgIGNvZGU6ICcnLAogICAgICAgIGluc3RhbGxwb3NpdGlvbjogJycsCiAgICAgICAgZmFjdG9yeWNvZGU6ICcnLAogICAgICAgIHByaWNlY29kZTogJycsCiAgICAgICAgcHJvZHVjdGlkOiAnJywKICAgICAgICBjYWxpYmVyOiAnJywKICAgICAgICBvcGVuZWQ6ICcnLAogICAgICAgIHVzZXJpZDogJycsCiAgICAgICAgaWQ6IHVuZGVmaW5lZAogICAgICB9LAogICAgICBwcmljZUxpc3Q6IHt9LAogICAgICBzdXBwbGllckxpc3Q6IHt9LAogICAgICBwcm9kdWN0TGlzdDoge30sCiAgICAgIGNhbGliZXJMaXN0OiB7fSwKICAgICAgb3BlbmVkTGlzdDoge30sCiAgICAgIGlzRGlzYWJsZWQ6IGZhbHNlLAogICAgICBsaXN0UXVlcnk6IHsKICAgICAgICBwYWdlOiAxLAogICAgICAgIGxpbWl0OiA1LAogICAgICAgIC8vIHR5cGU6IHRoaXMudHlwZSwKICAgICAgICBzb3J0OiAiK2lkIgogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIGNvZGU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLor7fovpPlhaXooajlj7ciCiAgICAgICAgfV0KICAgICAgfSwKICAgICAgbG9hZGluZzogZmFsc2UKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRMaXN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICB2YWxpZGF0ZUZvcm06IGZ1bmN0aW9uIHZhbGlkYXRlRm9ybSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdGhpcy4kcmVmc1siZGF0YUZvcm0iXS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBfdGhpcy52YWxpZGF0ZUZsYWcgPSB2YWxpZDsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0TWV0ZXI6IGZ1bmN0aW9uIGdldE1ldGVyKCkgewogICAgICByZXR1cm4gdGhpcy5tZXRlcjsKICAgIH0sCiAgICBnZXRMaXN0OiBmdW5jdGlvbiBnZXRMaXN0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy5tZXRlci5jb2RlID0gdGhpcy5jdXJNZXRlci5jb2RlOwogICAgICB0aGlzLm1ldGVyLmluc3RhbGxwb3NpdGlvbiA9IHRoaXMuY3VyTWV0ZXIuaW5zdGFsbHBvc2l0aW9uOwogICAgICAvLyB0aGlzLiRlbWl0KCJjcmVhdGUiKTsgLy8gZm9yIHRlc3QKCiAgICAgIHF1ZXJ5U3VwcGxpZXJMaXN0KCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczIuc3VwcGxpZXJMaXN0ID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICBfdGhpczIubWV0ZXIuZmFjdG9yeWNvZGUgPSByZXNwb25zZS5kYXRhWzBdLmlkOwogICAgICB9KTsKICAgICAgcXVlcnlQcmljZUxpc3QoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMi5wcmljZUxpc3QgPSByZXNwb25zZS5kYXRhOwogICAgICAgIF90aGlzMi5tZXRlci5wcmljZWNvZGUgPSByZXNwb25zZS5kYXRhWzBdLmlkOwogICAgICB9KTsKICAgICAgcXVlcnlQcm9kdWN0TGlzdCgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMyLnByb2R1Y3RMaXN0ID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICBfdGhpczIubWV0ZXIucHJvZHVjdGlkID0gcmVzcG9uc2UuZGF0YVswXS5pZDsKICAgICAgfSk7CiAgICAgIHF1ZXJ5TWV0ZXJDYWxpYmVyTGlzdCgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMyLmNhbGliZXJMaXN0ID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICBfdGhpczIubWV0ZXIuY2FsaWJlciA9IHJlc3BvbnNlLmRhdGFbMF0udmFsdWU7CiAgICAgIH0pOwogICAgICBxdWVyeU1ldGVyT3BlbmVkTGlzdCgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMyLm9wZW5lZExpc3QgPSByZXNwb25zZS5kYXRhOwogICAgICAgIF90aGlzMi5tZXRlci5vcGVuZWQgPSByZXNwb25zZS5kYXRhWzBdLnZhbHVlOwogICAgICB9KTsKICAgICAgaWYgKHRoaXMuY3VyTWV0ZXIuY29kZSAhPSAn5paw5aKe5rC06KGoJykgewogICAgICAgIC8vIOWKoOi9veaVsOaNrgogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMyLm1ldGVyLmJhc2VudW0gPSBfdGhpczIuY3VyTWV0ZXIuYmFzZW51bTsKICAgICAgICAgIF90aGlzMi5tZXRlci5mYWN0b3J5Y29kZSA9IE51bWJlcihfdGhpczIuY3VyTWV0ZXIuZmFjdG9yeWNvZGUpOwogICAgICAgICAgX3RoaXMyLm1ldGVyLnByaWNlY29kZSA9IF90aGlzMi5jdXJNZXRlci5wcmljZWNvZGU7CiAgICAgICAgICBfdGhpczIubWV0ZXIucHJvZHVjdGlkID0gX3RoaXMyLmN1ck1ldGVyLnByb2R1Y3RpZDsKICAgICAgICAgIF90aGlzMi5tZXRlci5jYWxpYmVyID0gX3RoaXMyLmN1ck1ldGVyLmNhbGliZXI7CiAgICAgICAgICBfdGhpczIubWV0ZXIub3BlbmVkID0gX3RoaXMyLmN1ck1ldGVyLm9wZW5lZCArICcnOwogICAgICAgICAgX3RoaXMyLm1ldGVyLnVzZXJpZCA9IF90aGlzMi5jdXJNZXRlci51c2VyaWQ7CiAgICAgICAgICBfdGhpczIubWV0ZXIuaWQgPSBfdGhpczIuY3VyTWV0ZXIuaWQ7CiAgICAgICAgICBfdGhpczIuaXNEaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICBfdGhpczIuJGZvcmNlVXBkYXRlKCk7CiAgICAgICAgfSwgMC41ICogMTAwMCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5tZXRlci5jb2RlID0gJyc7CiAgICAgIH0KICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["queryPriceList","querySupplierList","queryProductList","findMeterByCode","queryMeterCaliberList","queryMeterOpenedList","filters","props","type","curMeter","data","list","validateFlag","meter","basenum","code","installposition","factorycode","pricecode","productid","caliber","opened","userid","id","undefined","priceList","supplierList","productList","caliberList","openedList","isDisabled","listQuery","page","limit","sort","rules","required","message","loading","created","getList","methods","validateForm","_this","$refs","validate","valid","getMeter","_this2","then","response","value","setTimeout","Number","$forceUpdate"],"sources":["src/views/business/user/meterTab/meterTab.vue"],"sourcesContent":["<template>\r\n  <el-form\r\n    ref=\"dataForm\"\r\n    :rules=\"rules\"\r\n    :model=\"meter\"\r\n    :inline=\"true\"\r\n    label-position=\"left\"\r\n    label-width=\"auto\"\r\n    style=\" \"\r\n  >\r\n    <el-form-item label=\"表号\" prop=\"code\">\r\n      <el-input v-model=\"meter.code\" placeholder=\"请输入表号\" />\r\n    </el-form-item>\r\n    <el-form-item label=\"表地址\" prop=\"installposition\">\r\n      <el-input v-model=\"meter.installposition\" placeholder=\"请输入表安装地址\" />\r\n    </el-form-item>\r\n    <el-form-item label=\"表底数\" prop=\"basenum\">\r\n      <el-input v-model=\"meter.basenum\" placeholder=\"请输入用户名称\"  :disabled=isDisabled  />\r\n    </el-form-item>\r\n    <el-form-item label=\"价格类型\" prop=\"pricecode\">\r\n      <el-select v-model=\"meter.pricecode\" placeholder=\"请选择\" class=\"filter-item\" filterable>\r\n        <el-option v-for=\"item in priceList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\" />\r\n      </el-select>\r\n    </el-form-item>\r\n    <el-form-item label=\"厂商\" prop=\"factorycode\">\r\n      <el-select v-model=\"meter.factorycode\" placeholder=\"请选择\" class=\"filter-item\" filterable>\r\n        <el-option v-for=\"item in supplierList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\" />\r\n      </el-select>\r\n    </el-form-item>\r\n    <el-form-item label=\"产品类型\" prop=\"productid\">\r\n      <el-select v-model=\"meter.productid\" placeholder=\"请选择\" class=\"filter-item\" filterable>\r\n        <el-option v-for=\"item in productList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\" />\r\n      </el-select>\r\n    </el-form-item>\r\n    <el-form-item label=\"口径\" prop=\"caliber\">\r\n      <el-select v-model=\"meter.caliber\" placeholder=\"请选择\" class=\"filter-item\" filterable>\r\n        <el-option\r\n          v-for=\"item in caliberList\"\r\n          :key=\"item.value\"\r\n          :label=\"item.description\"\r\n          :value=\"item.value\"\r\n        />\r\n      </el-select>\r\n    </el-form-item>\r\n    <el-form-item label=\"账户状态\" prop=\"opened\">\r\n      <el-select v-model=\"meter.opened\" placeholder=\"请选择\" class=\"filter-item\" filterable>\r\n        <el-option\r\n          v-for=\"item in openedList\"\r\n          :key=\"item.value\"\r\n          :label=\"item.description\"\r\n          :value=\"item.value\"\r\n        />\r\n      </el-select>\r\n    </el-form-item>\r\n  </el-form>\r\n</template>\r\n\r\n<script>\r\nimport { queryPriceList } from \"@/api/priceManager\";\r\nimport { querySupplierList } from \"@/api/supplierManager\";\r\nimport { queryProductList } from \"@/api/productManager\";\r\nimport { findMeterByCode } from \"@/api/meterManager\";\r\nimport {  queryMeterCaliberList,  queryMeterOpenedList} from \"@/api/dictionaryManager\";\r\n\r\nexport default {\r\n  filters: {\r\n  },\r\n  props: {\r\n    type: { },\r\n    curMeter:{}\r\n  },\r\n  data() {\r\n    return {\r\n      list: null,\r\n      validateFlag:false,\r\n      meter: { basenum: 0,code:'',installposition:'',factorycode:'',pricecode:'',productid:'',caliber:'',opened:'',userid:'',id:undefined },\r\n      priceList: {},\r\n      supplierList: {},\r\n      productList: {},\r\n      caliberList: {},\r\n      openedList: {},\r\n      isDisabled : false,\r\n      listQuery: {\r\n        page: 1,\r\n        limit: 5,\r\n        // type: this.type,\r\n        sort: \"+id\"\r\n      },\r\n      rules: {\r\n        code: [{ required: true, message: \"请输入表号\" }]\r\n      },\r\n      loading: false\r\n    };\r\n  },\r\n  created() {\r\n    this.getList();\r\n  },\r\n  methods: {\r\n    validateForm(){\r\n      this.$refs[\"dataForm\"].validate(valid => {\r\n        this.validateFlag = valid;\r\n\r\n      });\r\n    },\r\n\r\n    getMeter(){\r\n      return this.meter;\r\n    },\r\n\r\n    getList() {\r\n      this.loading = true;\r\n      this.meter.code = this.curMeter.code;\r\n      this.meter.installposition =  this.curMeter.installposition;\r\n      // this.$emit(\"create\"); // for test\r\n\r\n      querySupplierList().then(response => {\r\n        this.supplierList = response.data;\r\n        this.meter.factorycode = response.data[0].id;\r\n      });\r\n      queryPriceList().then(response => {\r\n        this.priceList = response.data;\r\n        this.meter.pricecode = response.data[0].id;\r\n      });\r\n      queryProductList().then(response => {\r\n        this.productList = response.data;\r\n        this.meter.productid = response.data[0].id;\r\n      });\r\n      queryMeterCaliberList().then(response => {\r\n        this.caliberList = response.data;\r\n        this.meter.caliber = response.data[0].value;\r\n      });\r\n      queryMeterOpenedList().then(response => {\r\n        this.openedList = response.data;\r\n        this.meter.opened = response.data[0].value;\r\n\r\n      });\r\n      if(this.curMeter.code != '新增水表'){\r\n        // 加载数据\r\n        setTimeout(() => {\r\n          this.meter.basenum =  this.curMeter.basenum;\r\n          this.meter.factorycode =  Number(this.curMeter.factorycode);\r\n          this.meter.pricecode =  this.curMeter.pricecode;\r\n          this.meter.productid =  this.curMeter.productid;\r\n          this.meter.caliber =  this.curMeter.caliber;\r\n          this.meter.opened =  this.curMeter.opened+'';\r\n          this.meter.userid =  this.curMeter.userid;\r\n          this.meter.id =  this.curMeter.id;\r\n          this.isDisabled = true;\r\n\r\n          this.$forceUpdate();\r\n        }, 0.5 * 1000);\r\n      }else{\r\n        this.meter.code = '';\r\n      }\r\n      this.loading = false;\r\n      \r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n"],"mappings":"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"}]}